*##MASHED SCRIPT##*
*##- Moe 2010 -##*

*##Install Script##*




**##Scripts##**
scrp 2 6 50205 9

	tick rand 100 200

	doif totl 2 3 50214 lt 5

		setv va01 rand 9339 9366

		setv va02 rand 48080 48130

		gsub makecoconuts

	endi

	subr makecoconuts

		new: simp 2 3 50214 "moe_C2toDS_berries" 0 23 8001

		mira rand 0 1

		perm rand 55 55

		bhvr 41

		mvsf va01 va02

		accg 0

		attr 199

		elas 10

		fric 50

		tick rand 50 100

		setv name "onthetree" 1

		setv va00 post

		puhl 1 19 22

		puhl 2 19 22

	retn

endm



*Coconuts Make

scrp 2 3 50214 10

	emit 7 .15

endm





scrp 2 3 50214 1000

	snde "m_a2"

	setv va00 posl

	setv va01 posb

	inst

	reps 2

		new: simp 2 10 50214 "moe_C2toDS_berries" 0 rand 26 27 5000

		velo rand -15 15 rand -15 0

		tick rand 250 300

		mvsf va00 va01

	repe

	reps rand 5 7

		new: simp 2 8 50217 "moe_C2toDS_berries" 0 rand 18 21 5000

		mira rand 0 1

		bhvr 49

		attr 195

		accg 3

		aero 10

		fric 40

		perm 55

		elas 5

		tick rand 500 1000

		velo rand -10 10 rand -20 0

		mvsf va00 va01

	repe

	kill ownr

endm





scrp 2 3 50214 9

	doif carr eq null

		addv ov00 1

		doif ov00 ge rand 50 100 and accg lt 4

			accg 4

			velo rand -15 15 0

			setv name "onthetree" 0

		endi

		doif ov00 ge rand 125 150

			kill targ

		endi

	endi

endm



scrp 2 10 50214 9

	doif carr eq null

		addv ov00 1

		doif ov00 ge rand 50 100 and accg lt 4

			accg 4

			velo rand -15 15 0

			setv name "onthetree" 0

		endi

		doif ov00 ge rand 25 50

			kill targ

		endi

	endi

endm



scrp 2 8 50217 9

	doif carr eq null

		addv ov00 1

		doif ov00 ge rand 50 100 and accg lt 4

			accg 4

			velo rand -15 15 0

			setv name "onthetree" 0

		endi

		doif ov00 ge rand 25 50

			kill targ

		endi

	endi

endm



scrp 2 3 50214 6

	inst

	doif _p2_ le 7

		doif ov01 eq 0

			pose 1

			sndc "m_a1"

		endi

	elif _p2_ gt 35 and _p2_ lt 50

		setv ov01 1

		sndc "m_a1"

		pose 2

	elif _p2_ gt 50

		mesg writ targ 1000

	endi

	doif _p2_ ge -7

		doif ov01 eq 0

			pose 1

			sndc "m_a1"

		endi

	elif _p2_ lt -35 and _p2_ gt -50

		setv ov01 1

		sndc "m_a1"

		pose 2

	elif _p2_ lt -50

		mesg writ targ 1000

	endi

	doif _p1_ le 7

		doif ov01 eq 0

			pose 1

			sndc "m_a1"

		endi

	elif _p1_ gt 35 and _p1_ lt 50

		setv ov01 1

		sndc "m_a1"

		pose 2

	elif _p1_ gt 50

		mesg writ targ 1000

	endi

	doif _p1_ ge -7

		doif ov01 eq 0

			pose 1

			sndc "m_a1"

		endi

	elif _p1_ lt -35 and _p1_ gt -50

		setv ov01 1

		sndc "m_a1"

		pose 2

	elif _p1_ lt -50

		mesg writ targ 1000

	endi

endm





scrp 2 3 50214 5

	accg 4

	doif pose eq 0

		pose 1

	endi

endm





scrp 2 3 50214 4

	plne rand 4000 6000

	doif pose eq 0

		pose 1

	endi

	setv name "onthetree" 0

endm



scrp 2 3 50214 3

	inst

	snde "m_a1"

	doif name "onthetree" eq 1

		setv name "onthetree" 0

		accg 4

		velo rand -5 5 rand -2 1

	elif name "onthetree" eq 0

		doif pose eq 1

			pose 2

		elif pose eq 2

			targ ownr

			mesg writ targ 1000

		endi

	endi

endm





scrp 2 3 50214 1

	inst

	doif from eq pntr

		targ pntr

		anim [ 4 5 0]

	endi

	stim writ from 1 .15

	targ from

	chem 204 .25

	targ ownr

	mesg writ targ 3

endm



scrp 2 8 50217 12

	sndc "chwp"

	stim writ from 78 1

	targ from

	chem 151 -.31

	chem 150 -.39

	chem 149 -.27

*	chem 10 .31

*	chem 5 .39

*	chem 12 .27

	targ ownr

	wait 1

	kill targ

endm



scrp 2 8 50217 1

	mesg writ targ 12

endm





scrp 2 3 50217 1000

	setv va00 posx

	setv va01 posb

	new: simp 2 10 50214 "moe_C2toDS_berries" 0 rand 26 27 5000

	mira rand 0 1

	attr 195

	mvsf va00 va01

endm



scrp 2 10 50214 12

	sndc "eat1"

	doif crea from eq 1

		stim writ from 81 1

	endi

	kill ownr

endm



scrp 2 10 50214 10

	inst

	attr 195

	accg 4

	aero 10

	fric 40

	perm 55

	elas 5

	bhvr 48

endm







scrp 2 6 50208 9



	tick rand 100 200



	doif totl 2 8 50208 lt 15

*	setv va00 2

		setv va00 rand 0 1

		doif va00 eq 0

			setv va01 rand 3985 4021

			setv va02 rand 47837 48051

		elif va00 eq 1

			setv va01 rand 3730 3814

			setv va02 rand 47600 47835

		endi

		gsub makearnicaberries

	endi



	subr makearnicaberries

		new: simp 2 8 50208 "moe_C2toDS_berries" 0 6 5000

		mvsf va01 va02

		setv ov01 1

		accg 0

	retn

endm



scrp 2 8 50208 10

	perm rand 45 55

	bhvr 49

	attr 195

	elas 10

	fric 50

	tick rand 500 1000

	emit 6 .15

	wait 1

	doif ov01 eq 0

		accg 4

	else

		accg 0

	endi

endm



scrp 2 8 50208 9

	doif carr eq null

		addv ov00 1

		doif ov00 ge rand 10 50 and ov01 eq 1

			accg 4

			velo rand -5 5 0

		endi



		doif ov00 ge rand 3 5

			kill targ

		endi

	endi

endm



scrp 2 8 50208 1

	mesg writ targ 12

endm



scrp 2 8 50208 4

	plne rand 250 500

endm



scrp 2 8 50208 5

	accg 4

endm



scrp 2 8 50208 6

	sndc "dr12"

endm





scrp 2 8 50208 12

	sndc "chwp"

*Arnica*

	stim writ from 78 1

	targ from

	chem 94 .38

*Downatrophin*

	chem 17 .78

*Starch*

*	chem 5 .19

*Hunger for carbs Decrease*

	chem 150 -.19

	targ ownr

	wait 1

	kill targ

endm


*****************************


* Plant Creation script

scrp 2 4 50217 10

	attr 192

	perm 51

	fric 100

	elas 0

	pose 1

	mira rand 0 1

	tick rand 200 500

endm





* Vegetable Creation script

scrp 2 11 50217 10

	inst

	perm 51

	attr 194

	bhvr 48

	fric 90

	accg 3

	elas 10

*MOE MOE MOE MOE MOE what was this for?

*LIAM LIAM LIAM LIAM LIAM I don't know? :x

*pose 1

	emit 8 .15

	tick rand 200 500

endm



* Detritus Creation script

scrp 2 10 50217 10

	attr 192

	perm 51

	fric 100

	elas 0

	tick rand 200 500

endm





* Plant Timer script

scrp 2 4 50217 9



* Dormant during spring/summer

	doif sean lt 2

		stop

	endi



* Die if in water

	doif rtyp room ownr eq 8 or rtyp room ownr eq 9

		kill ownr

	endi



* Can we grow? Are we an adult?

	setv va02 grap posx posy

	doif pose lt 7 and prop va02 1 ge .15 and prop va02 2 gt 0.15 and prop va02 3 gt .15 and prop va02 4 gt .25

		gsub grow

	elif pose eq 7

		gsub adult

	else

		addv ov00 1

		doif ov00 ge 10

			kill ownr

		endi

	endi





	subr grow

		addv name "pose" 1

		pose name "pose"

	retn





	subr adult

		setv va00 posl

		setv va01 post

		setv va02 mira

		new: simp 2 11 50217 "moe_C2toDS_aubergine" 6 8 3000

		mira va02

		doif tmvt va00 va01 eq 1

			mvto va00 va01

		else

			mvsf va00 va01

		endi

		kill ownr

	retn



endm





* Vegetable Timer Script

scrp 2 11 50217 9



	addv ov00 1

	doif ov00 ge 35

		setv va00 posl

		setv va01 post

		setv va02 mira

		new: simp 2 10 50217 "moe_C2toDS_aubergine" 5 9 3000

		mira va02

		doif tmvt va00 va01 eq 1

			mvto va00 va01

		else

			mvsf va00 va01

		endi

		kill ownr

	endi



endm



* Detritus Timer script

scrp 2 10 50217 9



	frat 5

	anim [0 1 2 3 4]

	over



	esee 2 4 50217

		addv va10 1

	next

	esee 2 11 50217

		addv va10 1

	next



	doif va10 gt 5

		wait 50

		setv va00 posl

		setv va01 post

		new: simp 2 4 50217 "moe_C2toDS_aubergine" 14 0 3000

		doif tmvt va00 va01 eq 1

			mvto va00 va01

		else

			mvsf va00 va01

		endi

		doif rand 0 1 eq 0

			new: simp 2 4 50217 "moe_C2toDS_aubergine" 14 0 3000

			doif tmvt va00 va01 eq 1

				mvto va00 va01

			else

				mvsf va00 va01

			endi

			velo rand 10 -10 rand -4 -12

		endi

	endi

	wait 50

	kill ownr



endm





* Vegetable eat script

scrp 2 11 50217 12



* inject norn with nutrition stuff

	targ from

*	chem 5 .5

	chem 150 -.5

	chem 33 .5

	chem 149 -.5

*	chem 12 .5

	stim writ from 79 1

	targ ownr



* create new aubergine plant

	setv va00 posl

	setv va01 post

	new: simp 2 4 50217 "moe_C2toDS_aubergine" 14 0 3000

	doif tmvt va00 va01 eq 1

		mvto va00 va01

	else

		mvsf va00 va01

	endi



* kill original

	kill ownr

endm



* Vegetable drop script

scrp 2 11 50217 6



* sound!

	sndc "dr12"

endm





* Remove

scrp 2 6 50213 9



	tick rand 100 200



	doif totl 2 8 50213 lt 10

		setv va00 rand 0 1

		doif va00 eq 0

			setv va01 rand 4369 4452

			setv va02 rand 48063 48198

		elif va00 eq 1

			setv va01 rand 4440 4522

			setv va02 rand 48276 48374

		endi

		gsub makearnicaberries

	endi



	subr makearnicaberries

		new: simp 2 8 50213 "moe_C2toDS_berries" 0 11 rand 1000 3000

		mvsf va01 va02

	retn

endm



scrp 2 8 50213 10

	inst

	perm rand 45 55

	bhvr 49

	accg 0

	attr 195

	elas 10

	fric 50

	tick rand 50 100

	emit 6 .15

endm



scrp 2 8 50213 9

	doif carr eq null

		addv ov00 1



*you don't fall

*		doif ov00 ge rand 10 30

*			accg 4

*		endi



		doif ov00 ge rand 125 150

			kill targ

		endi

	endi

endm



scrp 2 8 50213 4

	plne rand 4000 6000

endm



scrp 2 8 50213 5

	accg 4

endm



scrp 2 8 50213 6

	sndc "dr12"

endm



scrp 2 8 50213 1

	mesg writ targ 12

endm



scrp 2 8 50213 12

	sndc "chwp"

	stim writ from 78 1

	targ from

*Starch*

*	chem 5 .31

*Hunger for Carbs Decrease*

	chem 150 -.31

*Prostaglandin*

	chem 94 .19

	targ ownr

	wait 1

	kill targ

endm



scrp 2 8 50207 10

	inst

	perm rand 45 55

	bhvr 49

	accg 0

	attr 195

	elas 10

	fric 50

	tick rand 50 100

	emit 6 .15

endm



scrp 2 8 50207 9

	doif carr eq null

		addv ov00 1

		doif ov00 ge rand 10 50 and accg ne 4

			accg 4

			velo rand -5 5 0

		endi



		doif ov00 ge rand 125 150

			kill targ

		endi

	endi

endm



scrp 2 8 50207 1

	mesg writ targ 12

endm



scrp 2 8 50207 4

	plne rand 4000 6000

endm



scrp 2 8 50207 5

	accg 4

endm



scrp 2 8 50207 6

	sndc "dr12"

endm





scrp 2 8 50207 12

	sndc "chwp"

	stim writ from 78 1

	targ from

*Hunger for Fat 50*

	chem 151 -.23

*Hunger for Starch 50*

	chem 150 -.19

*Hunger for Protein 50*

	chem 149 -.23

*Fat* 60

*	chem 10 .23

*Starch 50*

*	chem 5 .19

*Protein 60*

*	chem 12 .23

*EDTA

	chem 95 .35

*Sodium Thisulphite

	chem 96 .35

*Histamine A

	chem 73 .35

	targ ownr

	wait 1

	kill targ

endm


scrp 2 11 50200 6

	sndc "dr10"

endm




*Seed Timer

scrp 2 3 50200 9



	doif fall ne 0 or carr ne null

		stop

	endi



	setv va00 posl

	setv va01 post

	addv va01 10



	setv va02 grap posx posy



	doif rtyp va02 ne 8 and rtyp va02 ne 9

		doif prop va02 1 ge .15 and prop va02 2 gt 0.3 and prop va02 3 gt .15 and prop va02 4 gt .25

			gsub grow

		else

			gsub die

		endi

	else

		gsub die

	endi





	subr grow



		inst

		setv va12 0

		enum 2 11 50200

			doif targ ne null

				doif relx ownr targ lt 100 and rely ownr targ lt 100

					addv va12 1

				endi

			endi

		next

		targ ownr



		doif va12 lt 6

			new: simp 2 11 50200 "moe_C2toDS_carrots" 8 11 rand 1001 5000

			mvto va00 va01

			setv ov02 post

			subv ov02 10

			setv ov01 post

			kill ownr

		else

			gsub die

		endi



	retn



	subr die

		doif time eq 4

			stop

		endi

*Don't die right off the bat, give us some time.

		addv ov03 1

		doif ov03 ge 15

			doif carr eq null

				altr -1 2 .02

				altr -1 3 .015

				altr -1 4 .0124

				kill ownr

			endi

		endi

	retn





endm



*Seed Install Script

scrp 2 3 50200 10

	inst

	bhvr 48

	attr 199

	elas 10

	fric 50

	perm 40

	accg 4

	aero 10

	emit 7 .25

	tick rand 200 350

	rnge 200

*dcor 1

*core 0 wdth 0 10



endm



*Seed Eat Script

scrp 2 3 50200 12

*snde "chwp"

	snde "reat"

	stim writ from 77 1

	kill ownr

endm



scrp 2 11 50200 10

	inst

	attr 5

	elas 10

	fric 50

	perm 40

	accg 4

	aero 10

	tick rand 200 250

	plne rand 1000 5000

endm







scrp 2 11 50200 9

	doif time eq 4

		stop

	endi





	doif ov04 ne 1

		doif pose lt 4

			tick rand 250 350

			setv va00 pose

			addv va00 1

			pose va00

			stop

		elif pose eq 4 and post gt ov02

			loop

				setv va00 post

				subv va00 1

				mvto posl va00

				wait 5

			untl post le ov02

*You'r Ripe, Become edible.

*You can be seen, picked up.

			attr 3

			bhvr 51

			emit 8 .15

*You're RIPE - ov04

			setv ov04 1

*tick 1500

			tick 1500

			stop

		endi

	elif ov04 eq 1

*Detritus

		reps rand 1 3

			gsub seed

		repe



*loop

		doif carr eq null

			gsub detritus

		endi

*untl carr eq null



	endi







	subr seed

		setv ov05 posx

		setv ov06 post

		inst

		new: simp 2 3 50200 "moe_C2toDS_carrots" 9 10 1001

		mvsf mv05 mv06

		setv velx rand -15 15

		setv vely rand -5 -10

		targ ownr

	retn



	subr detritus



		setv va00 posl

		setv va01 post



		doif mira eq 1

			setv va02 1

		else

			setv va02 0

		endi



		doif pose eq 4

			setv va03 0

		else

			setv va03 1

		endi



		new: simp 2 10 50200 "moe_C2toDS_carrots" 2 17 1001

		mvto va00 va01

		pose va03

		mira va02

		kill ownr

	retn

endm



scrp 2 11 50200 1

	mesg writ ownr 12

endm



scrp 2 11 50200 2

	mesg writ ownr 12

endm





*PICK UP CARROT*

scrp 2 11 50200 4

	inst

	lock

	attr 199

	accg 4

	perm 51

	doif pose eq 4

		pose 5

		mira rand 0 1

	elif pose eq 6

		pose 7

		mira rand 0 1

	endi

endm







*DETRITUS





*PICK UP CARROT DETRITUS*

scrp 2 10 50200 4

	attr 199

	perm 51

	doif pose eq 0

		pose 1

		mira rand 0 1

	elif pose eq 1

		pose 1

		mira rand 0 1

	endi

endm







scrp 2 10 50200 10

	inst

	attr 7

	elas 10

	fric 50

	perm 40

	accg 4

	aero 10

	tick rand 200 250

*tick 50

	plne rand 1000 5000

endm



scrp 2 10 50200 9

	doif carr ne null

		stop

	endi

	addv ov00 1

	doif ov00 ge 10

		kill ownr

	endi

endm







*EAT CARROT*

scrp 2 11 50200 12

	sndc "chwp"

	wait 3

	doif pose eq 4 or pose eq 5

		targ from

*		chem 5 .5

		chem 150 -.5

		chem 33 .5

		chem 149 -.5

*		chem 12 .5

		stim writ from 79 1

		targ ownr

		gsub seed

	elif pose eq 6 or pose eq 7

		targ from

		chem 79 .15

*		chem 5 .15

		chem 75 .125

		chem 150 -.15

		chem 33 .15

		chem 149 -.15

*		chem 12 .15

		stim writ from 81 1

		targ ownr

		gsub seed

	endi

	targ ownr

	kill targ



	subr seed

		setv ov07 1

		setv va00 posx

		setv va01 post

		inst

		new: simp 2 3 50200 "moe_C2toDS_carrots" 9 10 1001

		mvsf va00 va01

		setv velx rand -15 15

		setv vely rand -5 -10

	retn





endm



scrp 2 10 50200 12

	stim writ from 81 1

	targ from

	chem 79 .15

*	chem 5 .15

	chem 75 .125

	chem 150 -.15

	chem 33 .15

	chem 149 -.15

*	chem 12 .15

	targ ownr

	gsub seed

	subr seed

		setv ov07 1

		setv va00 posx

		setv va01 post

		inst

		new: simp 2 3 50200 "moe_C2toDS_carrots" 9 10 1001

		mvsf va00 va01

		setv velx rand -15 15

		setv vely rand -5 -10

		kill ownr

	retn

endm



scrp 2 3 50218 10

	attr 198

	elas 0

	accg .05

	tick rand 75 125

	rnge 500

	frat 2

	anim [0 1 2 3 255]

endm



scrp 2 3 50218 12

	snde "reat"

	kill ownr

endm



scrp 2 3 50218 6

*hit the ground, STOP SPINNING

	doif obst down lt hght

		pose 3

	endi

endm



* Deathcap shroom script

scrp 2 3 50218 9



* speed to drift at

	setv va10 2.5

* amount to drift

	setv va11 50

	setv va00 rand 0 1

	setv va12 va11

	divv va12 2

	loop

		setv va01 posx

		doif va00 eq 0

			setv velx va10

			negv velx

			setv va00 1

		else

			setv velx va10

			setv va00 0

		endi

		loop

			setv va03 va01

			subv va03 posx

			absv va03

		untl fall eq 0 and wall eq down or va03 > va12

		setv va12 va11

	untl fall eq 0 and carr eq null

	pose 3

	wait rand 10 40



	inst

	setv va00 0

	esee 2 5 50200

		doif targ ne null

			addv va00 1

		endi

	next

	targ ownr



	doif va00 lt 2

		doif rtyp grap posx posy ne 8 and rtyp grap posx posy ne 9

			gsub check

			slow

			setv va00 posl

			setv va01 post

			new: simp 2 5 50200 "moe_C2toDS_deathcap" 13 0 rand 1000 5000

			setv va02 wdth

			setv va03 hght

			divv va02 2

			divv va03 2

			subv va00 va02

			subv va01 va03

			mvsf va00 va01

			mira rand 0 1

			targ ownr

			anim [4 5 6]

			kill ownr

		else

			addv ov02 1

			doif ov02 ge 5

				targ ownr

				anim [4 5 6]

				kill ownr

			endi

		endi

	else

		addv ov02 1

		doif ov02 ge 25

			targ ownr

			anim [4 5 6]

			kill ownr

		endi

	endi



	subr check

		setv va01 grap posx posy

		setv va00 prop va01 1



		doif va00 gt .5

*die after so long

			addv ov02 1

			doif ov02 ge 25

				targ ownr

				anim [4 5 6]

				kill ownr

			endi

			stop

		endi



	retn



endm



* Deathcap activate script

scrp 2 5 50200 1

	lock

	doif pose eq 4

		setv va00 posx

		setv va01 posy

		setv va02 plne

		addv va02 1

		setv va03 mira

		inst

		new: simp 2 20 50200 "moe_C2toDS_deathcap" 3 5 va02

		mira va03

		targ ownr

		pose 8

		setv ov00 1

		slow

	endi

	unlk

endm



* Deathcap top creation script

scrp 2 20 50200 10

	accg 2

	elas 1

	aero 2

	attr 199

	bhvr 48

	tick rand 2000 5000

endm



* Deathcap detritus creation script

scrp 2 10 50207 10

	accg 2

	elas 1

	aero 2

	attr 192

	tick rand 500 1000

endm



* Deathcap creation script

scrp 2 5 50200 10

	inst

	accg 2

	elas 1

	aero 2

	attr 193

	tick rand 500 1000

endm



* Deathcap timer script

scrp 2 5 50200 9

	doif rtyp grap posx posy eq 8 and rtyp grap posx posy eq 9

		kill ownr

	endi

	doif ov00 eq 1

		doif pose lt 11

			setv va00 pose

			subv va00 1

			pose va00

		endi

		doif pose eq 11

			kill ownr

		endi

	else

		doif pose lt 4 and ov00 eq 0

			setv va00 pose

			addv va00 1

			pose va00

			stop

		else

			setv ov00 1

			doif pose eq 4

				esee 2 3 50218

					addv va12 1

				next

				esee 2 5 50200

					addv va12 1

				next

				doif va12 lt 4

					setv va00 posx

					setv va01 posy

					addv va00 rand -10 10

					reps rand 2 3

						new: simp 2 3 50218 "moe_C2toDS_deathcap" 7 13 rand 1000 5000

						mvsf va00 va01

						velo rand -2 2 rand 0 -5

						targ ownr

					repe

				endi

			endi

			setv va00 posx

			setv va01 posy

			setv va02 plne

			setv va03 mira

* Create detritus, delete original object

			new: simp 2 10 50207 "moe_C2toDS_deathcap" 3 5 va02

			mira va03

			kill ownr

		endi

	endi

endm



* Deathcap detritus timer script

scrp 2 10 50207 9

	doif pose lt 2

		setv va00 pose

		addv va00 1

		pose va00

	endi

	doif pose eq 2

		kill ownr

	endi

endm



* Deathcap top timer script

scrp 2 20 50200 9

	wait rand 2000 5000

	kill ownr

endm



* Deathcap top eat script

scrp 2 20 50200 12

* Insert nasty chemicals here!



	snde "chwp"

	kill ownr

endm





scrp 2 6 50209 10



	reps 30

		setv va02 rand 0 5



		doif va02 eq 0

			setv va01 0

		elif va02 eq 1

			setv va01 4

		elif va02 eq 2

			setv va01 8

		elif va02 eq 3

			setv va01 13

		elif va02 eq 4

			setv va01 16

		elif va02 eq 5

			setv va01 18

		elif va02 eq 6

			setv va01 22

		endi



		loop

			setv va02 rand posl posr

			setv va03 rand post posb

		untl tran va02 va03 eq 0



		new: simp 2 7 50209 "moe_C2toDS_humming" 4 va01 2

		subv va03 hght

		setv va04 wdth

		divv va04 2

		subv va02 va04

		mvsf va02 va03

		setv va05 0

		addv va05 rand 0 3

		pose va05

		targ ownr

	repe



endm







scrp 2 6 50209 9



	esee 2 7 50209

		doif targ ne null

			addv va00 1

		endi

	next

	targ ownr

	doif va00 lt 30

*Summer Foxfire



		setv va02 rand 0 2



		doif va02 eq 0

			setv va01 0

		elif va02 eq 1

			setv va01 4

		elif va02 eq 2

			setv va01 8

		endi



		loop



			setv va02 rand posl posr

			setv va03 rand post posb



		untl tran va02 va03 eq 0



		new: simp 2 7 50209 "moe_C2toDS_humming" 4 va01 2

		subv va03 hght

		setv va04 wdth

		divv va04 2

		subv va02 va04

		mvsf va02 va03



		targ ownr

	endi





endm



*Flower Create

scrp 2 7 50209 10

	mira rand 0 1

	tick 1500

	emit 9 .15

*nectar

	setv name "nectar" 10

endm



scrp 2 7 50209 9

*restore nectar

	addv name "nectar" 10

	doif pose lt 3

		setv va00 pose

		addv va00 1

		pose va00

	elif pose eq 3

*make fruit

		gsub fruit

	endi



	subr fruit

		doif sean lt 3

			setv va00 posl

			setv va01 posb

			subv va00 6



			new: simp 2 8 50209 "moe_C2toDS_berries" 1 7 rand 500 1500

			mvsf va00 va01

			kill ownr

		elif sean eq 3

			setv va00 posl

			setv va01 posb

			addv va00 4



			new: simp 2 8 50210 "moe_C2toDS_berries" 1 5 rand 500 1500

			mvsf va00 va01

			kill ownr

		endi

	retn



endm



*Foxfire MAKE

scrp 2 8 50209 10

	perm rand 50 51

	accg 0

	elas 35

	aero 3

	fric 45

	attr 195

	tick 500

	bhvr 51

	emit 6 .15

endm



scrp 2 8 50210 10

	perm rand 50 51

	accg 0

	elas 35

	aero 3

	fric 45

	attr 195

	tick 500

	bhvr 51

	emit 6 .15

endm





*Pickup FoxfireS

scrp 2 8 50209 4

	accg 5

endm



scrp 2 8 50210 4

	accg 5

endm



*Foxfire Collision



scrp 2 8 50209 6

	sndc "dr12"

endm



scrp 2 8 50210 6

	sndc "dr12"

endm





*Foxfire Push 1 and 2



scrp 2 8 50209 1

	doif crea from eq 1

		mesg writ ownr 12

	endi

endm



scrp 2 8 50210 1

	doif crea from eq 1

		mesg writ ownr 12

	endi

endm



scrp 2 8 50209 2

	mesg writ ownr 12

endm



scrp 2 8 50210 2

	mesg writ ownr 12

endm



*Foxfire EAT



scrp 2 8 50209 12

	sndc "chwp"

	stim writ from 78 1

	targ from

*starch

*	chem 5 .4

*water

	chem 33 .15

*fat

*	chem 10 .19

	kill ownr

endm



scrp 2 8 50210 12

	snde "chwp"

	stim writ from 78 1

*starch

*	chem 5 .35

*water

	chem 33 .15

*protein

*	chem 12 .117

	kill ownr

endm



*Foxfire Timer



scrp 2 8 50209 9

	doif accg eq 0

		accg 5

		tick 5000

		stop

	else

		doif carr eq null and fall eq 0

			kill ownr

		endi

	endi

endm



scrp 2 8 50210 9

	doif accg eq 0

		accg 5

		tick 5000

		stop

	else

		doif carr eq null and fall eq 0

			kill ownr

		endi

	endi

endm



scrp 2 4 50204 10

	attr 719

	bhvr 41

	accg 4

	fric 90

	elas 0

	perm 51

	tick rand 150 250

	seta ov01 null

	seta ov02 null

	seta ov03 null

endm



*activate 1

scrp 2 4 50204 1

	stim writ from 83 1

endm



*hit

scrp 2 4 50204 3

	stim writ from 83 1

endm



*drop

scrp 2 4 50204 6

	snde "drop"

endm



*timer

scrp 2 4 50204 9

	doif ov00 eq 0

*	initial setup

		inst

		doif ov01 eq null

			gsub getposxposy

			gsub top

			pose 10

			targ ownr

		endi

		doif ov02 eq null

			gsub getposxposy

			gsub middle

			pose 10

			targ ownr

		endi



		doif ov03 eq null

			gsub getposxposy

			gsub bottom

			pose 10

			targ ownr

		endi

		slow

		setv ov00 1

	endi



	doif ov01 eq null

		gsub getposxposy

		gsub top

		targ ownr

	endi

	doif ov02 eq null

		gsub getposxposy

		gsub middle

		targ ownr

	endi



	doif ov03 eq null

		gsub getposxposy

		gsub bottom

		targ ownr

	endi





* randomly drop a fruit

	setv va50 rand 0 50

	setv va51 rand 1 3

	doif va50 eq 27

		doif va51 eq 1

			doif ov01 ne null

				targ ov01

				doif pose eq 10

					mesg writ targ 1001

					velo rand -5 2 -5

				endi

				targ ownr

				stop

			endi

		elif va51 eq 2

			doif ov02 ne null

				targ ov02

				doif pose eq 10

					mesg writ targ 1001

					velo rand -5 2 -5

				endi

				targ ownr

				stop

			endi

		elif va51 eq 3

			doif ov03 ne null

				targ ov03

				doif pose eq 10

					mesg writ targ 1001

					velo rand -5 2 -5

				endi

				targ ownr

				stop

			endi

		endi

	endi





	subr getposxposy

		setv va00 posl

		setv va01 post

		setv va02 plne

	retn



	subr top

		inst

		addv va01 4

		addv va00 48

		new: simp 2 8 50214 "moe_C2toDS_gelsemium" 12 25 va02

		frel ownr

		mvto va00 va01

		setv ov00 1

		seta mv01 targ

		seta ov01 ownr

		setv ov02 1

	retn



	subr middle

		inst

		addv va01 38

		addv va00 69

		new: simp 2 8 50214 "moe_C2toDS_gelsemium" 12 13 va02

		frel ownr

		mvto va00 va01

		setv ov00 1

		seta mv02 targ

		seta ov01 ownr

		setv ov02 2

	retn



	subr bottom

		inst

		addv va01 67

		addv va00 31

		new: simp 2 8 50214 "moe_C2toDS_gelsemium" 12 1 va02

		frel ownr

		mvto va00 va01

		setv ov00 1

		seta mv03 targ

		seta ov01 ownr

		setv ov02 3

	retn

endm



scrp 2 8 50214 10

	inst

	perm 51

	elas 25

	aero 3

	accg 0

	wait 1

	doif ov00 eq 1

		setv ov20 rand 600 1200

		tick 1

		attr 240

	endi

	emit 6 .15

endm



scrp 2 8 50214 4

	inst

	mesg writ targ 1001

endm



scrp 2 8 50214 1001

	inst

	doif ov00 eq 1

		inst

		pose 11

		attr 199

		accg 3

		tick rand 1000 2500

		setv ov00 0

		doif ov02 eq 1

			targ ov01

			seta ov01 null

			targ ownr

		elif ov02 eq 2

			targ ov01

			seta ov02 null

			targ ownr

		elif ov02 eq 3

			targ ov01

			seta ov03 null

			targ ownr

		endi

		doif carr eq null

			setv va00 posl

			subv va00 10

			mvsf va00 post

			perm 51

		endi

		slow

	endi

endm



scrp 2 8 50214 9

	doif ov00 eq 1

		doif pose lt 10

			tick ov20

			wait ov20

			setv va00 pose

			addv va00 1

			pose va00

			stop

		else

			bhvr 48

			attr 195

		endi

	else

		kill targ

	endi

endm



scrp 2 8 50214 12

	inst

	sndc "chwp"

	bhvr 32

	base 17

	pose 0

	stim writ from 78 1

	wait 1

	targ from

	chem 94 .6

	chem 95 .6

	wait 1

	targ ownr

endm



scrp 2 8 50214 1

	mesg writ targ 12

endm



scrp 2 8 50214 6

	sndc "dr10"

endm







scrp 2 24 50222 10

	attr 198

	elas 10

	accg 4

	aero 3

	perm 51

	emit 10 .15

endm



scrp 2 24 50222 1

	lock

	frat 2

	anim [0 1 2 3 4]

	over

	reps rand 3 5

		inst

		anim [5 6 7 8]

		over



		setv va00 posl

		setv va01 post

		subv va01 30

		setv va02 plne

		addv va02 rand -1 0

		new: simp 1 27 50222 "moe_C2toDS_grass" 10 9 va02

		mvsf va00 va01

		targ ownr



		addv va00 27

		addv va01 40



		new: simp 2 3 50222 "moe_C2toDS_grass" 0 19 va02

		mira rand 0 1

		mvsf va00 va01

		velo rand -15 15 rand 0 -15

		targ ownr



	repe



	anim [5 6 7 8 5 4 3 2 1 0]



endm



scrp 2 3 50222 10

	attr 198

	accg 3

	elas 35

	aero 1

	fric 40

	emit 7 .15

	tick rand 100 200

	bhvr 48

endm



scrp 2 3 50222 12

	stim writ from 77 1

	snde "chwp"

	kill ownr

endm



scrp 2 3 50222 9

	gsub check



	addv ov00 1



	doif ov00 gt 10

		kill ownr

	endi



	subr check

		rnge 100

		esee 2 4 50222

			doif targ ne null

				addv va02 1

			endi

		next

		targ ownr



		doif va02 ge 3

			stop

		endi



		doif carr ne null or fall eq 1

			stop

		endi

		setv va00 grap posx posy

*light

		setv va01 prop room ownr 1

*heat

		setv va02 prop room ownr 2

*water

		setv va03 prop room ownr 3

*nutrients

		setv va04 prop room ownr 4



		doif va00 gt .2 and va01 gt .2 and va03 gt .25 and va04 gt .2

			doif rtyp room ownr eq 9 or rtyp room ownr eq 8

				kill ownr

			endi



			gsub grow

		endi

	retn



	subr grow

		setv va00 posl

		setv va01 posb

		subv va00 30

		subv va01 30

		new: simp 2 4 50222 "moe_C2toDS_grass" 8 22 rand 1000 3000

		mvsf va00 va01

		kill ownr

	retn





endm



scrp 2 4 50222 10

	dcor 0

	mira rand 0 1

	setv va00 hght

	subv va00 2

	core 0 va00 0 wdth

	accg 7

	attr 193

	aero 0

	fric 100

	elas 0

	tick rand 100 200

endm



scrp 2 4 50222 9

	doif game "TMOD" eq 4 or sean eq 3

		stop

	endi

	doif pose lt 3

		setv va00 pose

		addv va00 1

		pose va00

	elif pose eq 3

		addv ov00 1

		tick rand 1000 2000

		doif ov00 eq 5

			gsub seed

		elif ov00 gt 10

			frat rand 100 200

			anim [4 5 6 7]

			over

			wait tick

			kill ownr

		endi

	endi





	subr seed



		esee 2 3 50222

			doif targ ne null

				addv va12 1

			endi

		next

		doif va12 lt 5

			reps rand 2 3

				setv va00 posx

				setv va01 posy

				subv va00 30

				subv va01 30

				new: simp 2 3 50222 "moe_C2toDS_grass" 0 19 va02

				mira rand 0 1

				mvsf va00 va01

				setv velx rand -10 10

				setv vely rand -10 -15

			repe

		endi



	retn



endm







scrp 1 27 50222 10

	lock

	mira rand 0 1

	anim [0 1 2 3 4 5 6 7 8 9]

	over

	kill ownr

endm



scrp 2 6 50203 9

	tick rand 100 200



	doif totl 2 20 50203 lt 25

*	setv va00 2

		setv va00 rand 0 7

		doif va00 eq 0

			setv va01 rand 5423 5625

			setv va02 rand 48100 48122

		elif va00 eq 1

			setv va01 rand 5563 5672

			setv va02 rand 48220 48249

		elif va00 eq 2

			setv va01 rand 5555 5610

			setv va02 rand 48113 48233

		elif va00 eq 3

			setv va01 rand 4800 4860

			setv va02 rand 48090 48141

		elif va00 eq 4

			setv va01 rand 4845 4890

			setv va02 rand 48141 48287

		elif va00 eq 5

			setv va01 rand 4920 4954

			setv va02 rand 48130 48198

		elif va00 eq 6

			setv va01 rand 5909 5972

			setv va02 rand 48618 48712

		elif va00 eq 7

			setv va01 rand 5910 5930

			setv va02 rand 48700 48770

		endi

		gsub makeledumberries

	endi



	subr makeledumberries

		new: simp 2 20 50203 "moe_C2toDS_berries" 0 10 rand 1000 3000

		mvsf va01 va02



	retn

endm



scrp 2 20 50203 10

	inst

	accg 0

	perm rand 45 55

	bhvr 49

	attr 195

	elas 10

	fric 50

	tick rand 50 100

	emit 6 .15

endm



scrp 2 20 50203 9

	doif carr eq null

*These don't fall on their own

*		addv ov00 1

*		doif ov00 ge rand 10 30

*			accg 4

*		endi



		doif ov00 ge rand 125 150

			kill targ

		endi

	endi

endm



scrp 2 20 50203 4

	plne rand 4000 6000

endm



scrp 2 20 50203 5

	accg 4

endm



scrp 2 20 50203 6

	sndc "dr12"

endm



scrp 2 20 50203 1

	mesg writ targ 12

endm



scrp 2 20 50203 12

	sndc "chwp"

*Pain*

	stim writ from 78 .25

	targ from

	chem 148 .19

*Sleep Toxin*

	chem 71 .38

*Protien*

*	chem 12 .39

*Histamine B*

	chem 74 .025

	targ ownr

	kill targ

endm







scrp 2 6 50212 9



	tick rand 100 200



	doif totl 2 8 50212 lt 10

		setv va01 rand 2100 2139

		setv va02 rand 48080 48130

		gsub makearnicaberries

	endi



	subr makearnicaberries

		new: simp 2 8 50212 "moe_C2toDS_berries" 0 1 8001

		perm 55

		bhvr 49

		mvsf va01 va02

		accg 0

		attr 195

		elas 10

		fric 50

		tick rand 50 100

	retn

endm



scrp 2 8 50212 10

	emit 6 .15

endm



scrp 2 8 50212 9

	doif carr eq null

		addv ov00 1

		doif ov00 ge rand 10 50 and accg ne 4

			accg 4

			velo rand -5 5 0

		endi



		doif ov00 ge rand 125 150

			kill targ

		endi

	endi

endm



scrp 2 8 50212 1

	mesg writ targ 12

endm



scrp 2 8 50212 4

	plne rand 4000 6000

endm



scrp 2 8 50212 5

	accg 6

endm



scrp 2 8 50212 6

	sndc "dr12"

endm





scrp 2 8 50212 12

	sndc "chwp"

	stim writ from 78 1

	targ from

*Hunger for Fat *

	chem 151 -.31

*Hunger for Starch *

	chem 150 -.39

*Hunger for Protein *

	chem 149 -.27

*Fat* 80

*	chem 10 .31

*Starch 100*

*	chem 5 .39

*Protein 70*

*	chem 12 .27

	targ ownr

	wait 1

	kill targ

endm







scrp 2 4 50201 10

	inst

	attr 192

	elas 0

	accg 4

	fric 100

	dcor 0

	core 5 0 50 55

	tick rand 500 800

	alph 128 1

	perm 51

endm



scrp 2 11 50209 6

	sndc "dr12"

endm



*Mush Create

scrp 2 11 50209 10

	inst

	attr 199

	bhvr 48

	elas 35

	fric 75

	accg 2

	perm 51

	emit 8 .15

	tick rand 500 800

	mira rand 0 1

	rnge 150

endm



scrp 2 4 50201 9



	gsub check



	subr check

		setv va00 rtyp grap posx posy

		doif va00 ne 8 and va00 ne 9

			setv va00 prop grap posx posy 1

			doif va00 lt .7

				etch 2 11 50209

					doif targ ne null

						addv va00 1

					endi

				next

				targ ownr

				doif va00 lt 8

					gsub grow

				endi

			endi

		endi

	retn





	subr grow

		setv va00 rand 1 5

		doif va00 eq 1

			setv va03 1

		elif va00 eq 2

			setv va03 4

		elif va00 eq 3

			setv va03 7

		elif va00 eq 4

			setv va03 10

		elif va00 eq 5

			setv va03 13

		endi



		setv va00 posl

		setv va01 posr

		addv va00 20

		subv va01 20

		setv va02 post



		new: simp 2 11 50209 "moe_C2toDS_mush" 3 va03 rand 1000 5000

		mvsf rand va00 va01 va02

		targ ownr

	retn

endm



scrp 2 11 50209 9

	doif carr ne null

		stop

	endi



	doif pose lt 2

		setv va00 pose

		addv va00 1

		pose va00

		stop

	endi



	addv ov10 1



	doif ov10 ge 10

		kill ownr

	endi



	gsub check



	subr check

		targ ownr

		inst

		etch 2 4 50201

			doif targ ne null

				addv va01 1

			endi

		next

		targ ownr

		etch 2 11 50209

			doif targ ne null

				addv va00 1

			endi

		next

		targ ownr

		doif va01 lt 1 and va00 ge 12

			setv va00 rtyp grap posx posy

			doif va00 ne 8 and va00 ne 9

				setv va00 prop grap posx posy 1

				doif va00 lt .7

					gsub root

				endi

			endi

		endi

		slow

	retn



	subr root

		setv va00 posl

		subv va00 rand 25 50

		setv va01 posb

		new: simp 2 4 50201 "moe_C2toDS_mush" 0 16 rand 1000 5000

		mvsf va00 va01

	retn



	subr grow

		setv va00 rand 1 5

		doif va00 eq 1

			setv va03 1

		elif va00 eq 2

			setv va03 4

		elif va00 eq 3

			setv va03 7

		elif va00 eq 4

			setv va03 10

		elif va00 eq 5

			setv va03 13

		endi



		setv va00 posl

		setv va01 posr

		subv va00 10

		addv va01 10

		setv va02 post



		new: simp 2 11 50209 "moe_C2toDS_mush" 3 va03 rand 1000 5000

		mvsf rand va00 va01 va02

		targ ownr

	retn

endm



scrp 2 11 50209 12

	sndc "chwp"

	stim writ from 79 1

	wait 1

*	targ from

*starch, fat, protein

	chem 5 .3137

	chem 10 .078

	chem 12 .078

	wait 1

	kill ownr

endm





*Mush Planter

scrp 2 24 50208 1

	lock

	sndc "m_a7"

	anim [0 1 2 3 4 5 6 7 8 9 10]

	over

	doif ov00 eq 0

		setv va00 posx

		subv va00 46

		setv va01 posb

		new: simp 2 4 50201 "moe_C2toDS_mush" 0 16 rand 1000 5000

		mvsf va00 va01

		targ ownr

	else

		etch 2 4 50201

			doif targ ne null

				kill targ

			endi

			targ ownr

		next

	endi

	anim [10 9 8 7 6 5 4 3 2 1 0]

	unlk

endm



scrp 2 24 50208 1001

	doif ov00 eq 0

		part 2

		pose 1

		setv ov00 1

	else

		part 2

		pose 0

		setv ov00 0

	endi

endm



scrp 2 24 50208 6

	snde "drop"

endm



***************************************




scrp 2 3 50202 9



	doif ov00 eq 1

		doif ov02 eq 0 and pose lt 3

			gsub growvine

		elif ov02 eq 0 and pose eq 3

			attr 231

			bhvr 32

		endi

		doif ov02 eq 1 and pose lt 7

			gsub growvine

		elif ov02 eq 1 and pose eq 7

			attr 231

			bhvr 32

		endi

		doif ov02 eq 2 and pose lt 11

			gsub growvine

		elif ov02 eq 2 and pose eq 11

			attr 231

			bhvr 32

		endi

	endi



	doif fall eq 0 and carr eq null

		gsub check

	endi

	subr check

		doif time eq 4

			stop

		endi

		rnge 200

		setv va00 rtyp grap posx posy

		setv va05 grap posx posy

*light

		setv va01 prop va05 1

*heat

		setv va02 prop va05 2

*water

		setv va03 prop va05 3

*nutrients

		setv va04 prop va05 4

*can't grow underwater. :/

		doif va00 ne 8 and va00 ne 9

			doif va01 ge .15 and va02 ge .25 and va03 ge .2 and va04 ge .15

				gsub grow

			else

				gsub die

			endi

		endi

	retn



	subr die

		frat 50

		anim [1 2 3 4]

		over

		wait 50

		kill ownr

	retn



	subr growvine

		setv va00 pose

		addv va00 1

		pose va00

	retn



	subr grow

		frat 50

		anim [1 2 3 4]

		over



		setv va06 0

		esee 2 4 50202

			doif targ ne null

				addv va06 1

			endi

		next

		targ ownr

		doif va06 lt 4

			inst

			setv va00 posl

			setv va01 posb

			subv va01 60

			doif mira eq 1

				subv va00 1

			else

				subv va00 1

			endi

			new: comp 2 4 50202 "moe_C2toDS_nuts" 14 17 rand 1000 3000

			doif tmvt va00 va01 eq 1

				mvto va00 va01

			else

				mvsf va00 va01

			endi

			kill ownr

		else

			kill ownr

		endi

	retn

endm



scrp 2 4 50202 10

	inst

	attr 192

	elas 0

	accg 4

	bhvr 27

	fric 100

	tick rand 200 350

	mira rand 0 1

	seta ov01 null

	seta ov02 null

	seta ov03 null

endm



scrp 2 4 50202 1

	urge writ from 3 .5 12 .5

endm



scrp 2 4 50202 2

	urge writ from 3 .5 12 .5

endm



scrp 2 4 50202 3

	urge writ from 3 .5 12 .5

endm



scrp 2 4 50202 12

	urge writ from 3 .5 12 .5

endm





scrp 2 4 50202 9

	doif pose lt 5

		tick rand 200 350

		setv va00 pose

		addv va00 1

		pose va00

		stop

	elif pose eq 5

		tick rand 500 650

		inst

		pose 6

		doif mira eq 0

			setv va03 32

			setv va04 15

		else

			setv va03 18

			setv va04 15

		endi

		pat: dull 1 "moe_C2toDS_nuts" 55 va03 va04 1

		part 1

		mira mira

		part 0

		gsub checknuts

		inst

		targ ov01

		pose 3

		targ ownr

		targ ov02

		pose 7

		targ ownr

		targ ov03

		pose 11

		targ ownr

		slow

	endi



	doif time ne 5

		addv ov04 1

	else

		stop

	endi





	gsub checknuts



	doif ov04 ge 42 and ov04 lt 45

		inst

		doif ov01 ne null and ov02 ne null and ov03 ne null

			setv va00 rand 0 2

			doif va00 eq 0

				targ ov01

				doif attr eq 231

					mesg writ targ 1001

					velo rand -10 10 -3

					stop

				endi

			elif va00 eq 1

				targ ov02

				doif attr eq 231

					mesg writ targ 1001

					velo rand -10 10 -3

					stop

				endi

			elif va00 eq 2

				targ ov03

				doif attr eq 231

					mesg writ targ 1001

					velo rand -10 10 -3

					stop

				endi

			endi

		endi

		slow

	endi



	doif ov04 ge 50

		lock

		inst

		doif ov01 ne null and ov02 ne null and ov03 ne null

			pose 7

			pat: kill 1

			targ ov01

			kill targ

			targ ownr

			targ ov02

			kill targ

			targ ownr

			targ ov03

			kill targ

			targ ownr

			frat 250

			anim [7 8 9 10 11 12 13]

			over

			kill ownr

		endi

		slow

		unlk

	endi





	subr checknuts

		inst

		doif ov01 eq null

			gsub getposxposy

			gsub growleft

			targ ownr

		endi

		doif ov02 eq null

			gsub getposxposy

			gsub growmiddle

			targ ownr

		endi

		doif ov03 eq null

			gsub getposxposy

			gsub growright

			targ ownr

		endi

		slow

	retn



	subr getposxposy

		setv va00 posl

		setv va01 post

		setv va02 plne

	retn



	subr growleft

		addv va02 2

		setv va03 mira

		doif mira eq 0

			addv va00 3

			addv va01 16

		else

			addv va00 31

			addv va01 16

		endi

		new: simp 2 3 50202 "moe_C2toDS_nuts" 25 31 va02

		pose 0

		frel ownr

		mvsf va00 va01

		mira va03

		setv ov00 1

		accg 0

		seta ov01 ownr

		setv ov02 0

		seta mv01 targ

		bhvr 48

	retn



	subr growmiddle

		addv va02 1

		setv va03 mira

		doif mira eq 0

			addv va00 28

			addv va01 31

		else

			addv va00 10

			addv va01 31

		endi

		new: simp 2 3 50202 "moe_C2toDS_nuts" 25 31 va02

		pose 4

		frel ownr

		mvsf va00 va01

		mira va03

		setv ov00 1

		accg 0

		seta ov01 ownr

		setv ov02 1

		seta mv02 targ

		bhvr 48

	retn



	subr growright

		addv va02 0

		setv va03 mira

		doif mira eq 0

			addv va00 30

			addv va01 19

		else

			addv va00 8

			addv va01 19

		endi

		new: simp 2 3 50202 "moe_C2toDS_nuts" 25 31 va02

		pose 8

		frel ownr

		mvsf va00 va01

		mira va03

		setv ov00 1

		accg 0

		seta ov01 ownr

		setv ov02 2

		seta mv03 targ

		bhvr 48

	retn



endm



scrp 2 3 50202 10

	inst

	emit 7 .15

	elas 25

	fric 35

	puhl -1 28 18

	perm 51

	rnge 200

	wait 1

	doif ov00 eq 0

		attr 199

		bhvr 48

		accg 3

		tick rand 500 1000

	else

		attr 225

		bhvr 0

		accg 0

		tick rand 100 250

	endi



endm





*Pick nuts off plant



scrp 2 3 50202 4

	inst

	mesg writ targ 1001

endm



scrp 2 3 50202 1001

	inst

	attr 199

	bhvr 48

	accg 4

	doif ov09 eq 0

		base 12

		pose 0

	else

		base 18

		pose 0

	endi

	tick rand 1000 2500

	doif ov00 eq 1

		setv ov00 0

		doif ov02 eq 0

			targ ov01

			seta ov01 null

		elif ov02 eq 1

			targ ov01

			seta ov02 null

		elif ov02 eq 2

			targ ov01

			seta ov03 null

		endi

		targ ownr

	endi

	doif carr eq null

		doif tmvt posl post eq 0

			mvsf posl post

		else

			mvto posl post

		endi

	endi

endm



scrp 2 3 50202 12

	inst

	doif ov00 eq 1

		call 1001 0 0

	endi

	stim writ from 77 3

	doif ov09 eq 0

		base 18

		pose 1

		snde "eat1"

		setv ov09 1

		tick rand 500 1000

	elif ov09 eq 1

		snde "eat1"

		kill ownr

	endi

*	targ from

*	chem 3 .117

*	chem 5 .39

endm



scrp 2 3 50202 1

	inst

	mesg writ targ 1001

	doif from eq pntr and ov00 eq 1

		setv va00 posx

		targ pntr

		doif posl gt va00

			setv va00 -10

		else

			setv va00 10

			setv va01 1

		endi

		targ ownr

		velo va00 rand -5 -10

		targ pntr

		doif va01 eq 0

			anim [4 5 4 0]

		else

			anim [10 11 12 0]

		endi

		sndc "smck"

		over

	endi

endm



scrp 2 3 50202 5

endm



scrp 2 3 50202 6

	doif ov09 eq 0

		base 12

		pose 1

	else

		base 18

		pose 1

	endi

	attr 195

	sndc "dr10"

endm


***********************************

scrp 2 3 50204 10

	inst

	attr 195

	bhvr 48

	elas 1

	accg 3

	perm 51

	rnge 500

	fric 25

	tick rand 50 75

	puhl -1 12 20

	emit 7 .15

endm



scrp 2 3 50204 6

	inst

	lock

	anim [0]

	unlk

endm



scrp 2 3 50204 9



	doif fall eq 0

		pose 0

	endi



	doif carr eq null

		doif ov00 le rand 5 7

			addv ov00 1

			anim [1 2 3 4 5 6 7 8 0 255]

			setv velx rand -10 10

			setv vely rand -20 -30

			sndc "pop1"

		else

			tick rand 150 250

			gsub check

		endi

	endi





	subr check

		doif time eq 4

			stop

		endi



		esee 2 7 50204

			addv va06 1

		next

		doif va06 lt 5

			setv va00 rtyp grap posx posy

			setv va05 grap posx posy

*light

			setv va01 prop va05 1

*heat

			setv va02 prop va05 2

*water

			setv va03 prop va05 3

*nutrients

			setv va04 prop va05 4

*can't grow underwater. :/

			doif va00 ne 8 and va00 ne 9

				doif va01 ge .15 and va02 ge .25 and va03 ge .2 and va04 ge .2

					anim [9 10 11 12 13 14]

					over

					gsub grow

				else

					gsub hibernate

				endi

			else

				kill targ

			endi

		else

			gsub hibernate

		endi

	retn



	subr hibernate

		setv va10 0

		esee 2 3 50204

			addv va10 1

		next

		targ ownr

		doif va10 gt 3

			kill ownr

*show 0

		else

			show 0

			bhvr 0

			attr 209

		endi

	retn



	subr grow

		setv va00 posx

		subv va00 39

		setv va01 posb

		subv va01 96

		new: comp 2 7 50204 "moe_C2toDS_pear" 35 24 rand 500 2500

		doif tmvt va00 va01 eq 1

			mvto va00 va01

		else

			mvsf va00 va01

		endi

		targ ownr

	retn

endm



scrp 2 7 50204 10

*196

	inst

	attr 196

	elas 0

	accg 4

	perm 51

	tick rand 250 300

	mira rand 0 1

	emit 9 .15

	plne rand 500 2500

	setv name "nectar" 10

endm



scrp 2 7 50204 255

	stop

endm



scrp 2 7 50204 9

*addv name "nectar" 1

	doif pose lt 12

		setv va00 pose

		addv va00 1

		pose va00

		stop

	elif pose eq 12

		inst

		gsub getposxpost

		gsub leftfruit

		targ ownr

		setv ov01 1

		gsub getposxpost

		gsub middlefruit

		targ ownr

		setv ov02 1

		gsub getposxpost

		gsub rightfruit

		targ ownr

		setv ov03 1

		pose 14

		doif mira eq 0

			pat: dull 1 "moe_C2toDS_pear" 65 10 28 1

			pat: dull 2 "moe_C2toDS_pear" 70 23 0 1

			pat: dull 3 "moe_C2toDS_pear" 75 33 23 1

		else

			pat: dull 1 "moe_C2toDS_pear" 65 31 28 1

			pat: dull 2 "moe_C2toDS_pear" 70 16 0 1

			pat: dull 3 "moe_C2toDS_pear" 75 7 23 1

			part 1

			mira 1

			part 2

			mira 1

			part 3

			mira 1

		endi

	endi



	lock

	doif ov04 eq null

		setv ov01 0

	endi

	doif ov05 eq null

		setv ov02 0

	endi

	doif ov06 eq null

		setv ov03 0

	endi

	doif ov10 ge 50 and ov01 eq 1 and ov02 eq 1 and ov03 eq 1

		part 1

		doif pose eq 0

			part 2

			doif pose eq 0

				part 3

				doif pose eq 0

					part 0

					pose 12

					inst

					targ ov04

					kill targ

					targ ownr

					targ ov05

					kill targ

					targ ownr

					targ ov06

					kill targ

					targ ownr

					pat: kill 1

					pat: kill 2

					pat: kill 3

					part 0

					frat 3

					anim [16 17 18 19 20 21]

					over

					snde "laun"

					gsub seed

					anim [22 23 24 25]

					over

					wait tick

					frat 250

					anim [26 27 28 29 30 31 32 33 34]

					over

					kill targ

				endi

			endi

		endi

	endi

	unlk



	doif time eq 4 and ov07 eq 0

		part 1

		gsub close

		part 2

		gsub close

		part 3

		gsub close

		doif pose eq 4

			part 2

			doif pose eq 4

				part 1

				doif pose eq 4

					setv ov07 1

					targ ov04

					doif targ ne null

						attr 240

						bhvr 0

					endi

					targ ownr

					targ ov05

					doif targ ne null

						attr 240

						bhvr 0

					endi

					targ ownr

					targ ov06

					doif targ ne null

						attr 240

						bhvr 0

					endi

					targ ownr

				endi

			endi

		endi

	elif time ne 4 and ov07 eq 1

		setv ov07 0

		targ ov04

		doif targ ne null

			attr 231

			bhvr 32

		endi

		targ ownr

		targ ov05

		doif targ ne null

			attr 231

			bhvr 32

		endi

		targ ownr

		targ ov06

		doif targ ne null

			attr 231

			bhvr 32

		endi

		targ ownr

	endi





	doif time eq 4

		stop

	else

		addv ov10 1

	endi



	inst

	doif ov01 eq 0

		part 1

		gsub close

		doif pose eq 4

			gsub getposxpost

			gsub leftfruit

			targ ownr

			setv ov01 1

		endi

	elif ov01 eq 1

		part 1

		gsub open

	endi



	doif ov02 eq 0

		part 2

		gsub close

		doif pose eq 4

			gsub getposxpost

			gsub middlefruit

			targ ownr

			setv ov02 1

		endi

	elif ov02 eq 1

		part 2

		gsub open

	endi



	doif ov03 eq 0

		part 3

		gsub close

		doif pose eq 4

			gsub getposxpost

			gsub rightfruit

			targ ownr

			setv ov03 1

		endi

	elif ov03 eq 1

		part 3

		gsub open

	endi

	slow





	doif ov10 ge rand 35 45 and ov10 lt 50 and ov01 eq 1 and ov02 eq 1 and ov03 eq 1

		part 1

		doif pose eq 0

			part 2

			doif pose eq 0

				part 3

				doif pose eq 0

					part 0

					setv va00 rand 0 2

					doif va00 eq 0

						targ ov04

						mesg writ targ 1001

					elif va00 eq 1

						targ ov05

						mesg writ targ 1001

					elif va00 eq 2

						targ ov06

						mesg writ targ 1001

					endi

					targ ownr

				endi

			endi

		endi

	endi













	subr seed

		inst

		setv va02 plne

		subv va02 1





		setv va00 posl

		setv va01 posy

		doif mira eq 0

			addv va00 10

			subv va01 20

			setv va03 -5

		else



			addv va00 35

			subv va01 20

			setv va03 5

		endi

		new: simp 2 3 50204 "moe_C2toDS_pear" 15 8 va02

		setv ov00 0

		mvsf va00 va01

		anim [0 1 2 3 4 5 6 7 8 0 255]

		velo va03 rand -10 -25

		targ ownr



		setv va00 posl

		setv va01 posy

		doif mira eq 0

			addv va00 40

			subv va01 25

			setv va03 5

		else

			addv va00 15

			subv va01 25

			setv va03 -5

		endi



		new: simp 2 3 50204 "moe_C2toDS_pear" 15 8 va02

		setv ov00 0

		mvsf va00 va01

		anim [0 1 2 3 4 5 6 7 8 0 255]

		velo va03 rand -10 -25

		targ ownr



		setv va00 posx

		setv va01 post

		doif mira eq 0

			addv va00 -15

			subv va01 0

			setv va03 -5

		else

			addv va00 -10

			subv va01 0

			setv va03 5

		endi



		new: simp 2 3 50204 "moe_C2toDS_pear" 15 8 va02

		setv ov00 0

		mvsf va00 va01

		anim [0 1 2 3 4 5 6 7 8 0 255]

		velo va03 rand -10 -25

		targ ownr



	retn





*Subroutines!*



	subr close

		doif pose lt 4

			setv va00 pose

			addv va00 1

			pose va00

		endi

	retn



	subr open

		doif pose gt 0

			setv va00 pose

			subv va00 1

			pose va00

		endi

	retn



	subr getposxpost

		inst

		setv va02 plne

		setv va00 posl

		setv va01 post

	retn



	subr leftfruit

		inst

		doif mira eq 0

			addv va00 9

			addv va01 24

		else

			setv va04 1

			addv va00 38

			addv va01 24

		endi

		new: simp 2 8 50204 "moe_C2toDS_pear" 5 80 va02

		seta ov01 ownr

		frel ov01

		mvto va00 va01

		setv ov00 1

		mira va04

		seta mv04 targ

	retn



	subr middlefruit

		inst

		doif mira eq 0

			addv va00 25

			addv va01 0

		else

			setv va04 1

			addv va00 24

			addv va01 0

		endi

		new: simp 2 8 50204 "moe_C2toDS_pear" 5 80 va02

		seta ov01 ownr

		pose 1

		frel ov01

		mvto va00 va01

		setv ov00 1

		mira va04

		seta mv05 targ

	retn



	subr rightfruit

		inst

		doif mira eq 0

			addv va00 42

			addv va01 28.5

		else

			setv va04 1

			addv va00 10

			addv va01 28.5



		endi

		new: simp 2 8 50204 "moe_C2toDS_pear" 5 80 va02

		seta ov01 ownr

		pose 2

		frel ov01

		mvto va00 va01

		setv ov00 1

		mira va04

		seta mv06 targ

	retn

endm



scrp 2 8 50204 10

	inst

	perm 51

	attr 231

	accg 0

	aero 4

	elas 25

	bhvr 48

	puhl -1 16 22

	tick rand 1000 2000

	emit 6 .15

endm



scrp 2 8 50204 6

	lock

	snde "dr12"

	over

endm



scrp 2 8 50204 255

	doif ov04 eq null

		setv ov01 0

	endi

	doif ov05 eq null

		setv ov02 0

	endi

	doif ov06 eq null

		setv ov03 0

	endi



endm



scrp 2 10 50204 6

	lock

	snde "dr10"

	over

endm



scrp 2 8 50204 1

	inst

	mesg writ targ 1001

	doif from eq pntr and ov00 eq 1

		setv va00 posx

		targ pntr

		doif posl gt va00

			setv va00 -10

		else

			setv va00 10

			setv va01 1

		endi

		targ ownr

		velo va00 rand -5 -10

		targ pntr

		doif va01 eq 0

			anim [4 5 4 0]

		else

			anim [10 11 12 0]

		endi

		sndc "smck"

		over

	endi

endm



scrp 2 8 50204 4

	inst

	mesg writ targ 1001

endm



scrp 2 3 50204 12

	stim writ from 77 1

*	targ from

	sndc "chwp"

*chem this and that

*starch

*	chem 5 .23

*fat

*	chem 10 .23

*	targ ownr

	kill ownr

endm



scrp 2 8 50204 12

	doif ov00 eq 1

		mesg writ ownr 4

	endi

	stim writ from 78 1

	targ from

	sndc "chwp"

*chem this and that

*starch

*	chem 5 .39

*fat

*	chem 10 .31

	targ ownr

	setv va02 plne

	setv va00 posl

	setv va01 post

	new: simp 2 10 50204 "moe_C2toDS_pear" 0 84 va02

	mira rand 0 1

	mvsf va00 va01

	kill ownr

endm



scrp 2 10 50204 12

	stim writ from 81 1

*	targ from

	sndc "chwp"

*chem this and that

*	targ ownr

	kill ownr

endm



scrp 2 8 50204 1001

	inst

	attr 199

	bhvr 48



**Prevents explosions.

*	inst

*	doif carr eq null

*		setv va00 posl

*		setv va01 post

*		mvsf 4845 49706

*		perm 51

*		mvsf va00 va01

*	endi

*	slow



	doif ov00 eq 1

		accg 3

		doif pose eq 0

			mira 1

			targ ov01

			setv ov01 0

			seta ov04 null

		elif pose eq 1

			mira rand 0 1

			targ ov01

			setv ov02 0

			seta ov05 null

		elif pose eq 2

			mira 0

			targ ov01

			setv ov03 0

			seta ov06 null

		endi

		targ ownr

		pose 3

		doif carr eq null

			mvsf posl post

		endi

		setv ov00 0

	endi

endm



scrp 2 8 50204 9

	doif ov00 eq 0 and carr eq null and fall eq 0

		setv va02 plne

		setv va00 posl

		setv va01 post

		new: simp 2 10 50204 "moe_C2toDS_pear" 0 84 va02

		mira rand 0 1

		mvsf va00 va01

		kill ownr

	endi

endm



*detritus create

scrp 2 10 50204 10

	attr 195

	accg 4

	elas 5

	fric 50

	aero 4

	bhvr 48

	perm 51

	tick rand 500 700

	puhl -1 12 20

endm



scrp 2 10 50204 9

	doif carr eq null and fall eq 0

		kill targ

	endi

endm





scrp 2 23 50201 10

	inst

	lock

	attr 199

	bhvr 1

	elas 10

	fric 75

	perm 60

	accg 4

	aero 10

	emit 10 .15

endm



scrp 2 23 50201 1

	inst

	lock

	sndc "potl"

	frat 2

	anim [0 1 2]

	over

	anim [3 4 5 6 7 8 9 10 11 12]

	over

	sndc "pop2"

	setv ov01 posx

	setv ov02 post

	reps rand 4 6

		gsub potato

	repe

	targ ownr

	anim [13 14 15 16 17 18 19 20 0]

	over



	subr potato

		inst

		new: simp 2 3 50201 "moe_C2toDS_potato" 9 0 1001

		mvsf mv01 mv02

		setv va00 rand -1500 1500

		divv va00 100.00

		setv velx va00

		setv va00 rand -1550 -2050

		divv va00 100.00

		setv vely va00

	retn



endm





*Seed Timer

scrp 2 3 50201 9



	doif fall ne 0 or carr ne null

		stop

	endi



	setv va00 posl

	setv va01 post

	addv va01 4



	setv va02 grap posx posy



	doif rtyp va02 ne 8 and rtyp ov11 ne 9

		doif prop va02 1 ge .15 and prop va02 2 gt 0.4 and prop va02 3 gt .15 and prop va02 4 gt .25

			gsub grow

		else

			gsub die

		endi

	else

		gsub die

	endi





	subr grow



		inst

		setv va12 0

		enum 2 11 50201

			doif targ ne null

				doif relx ownr targ lt 100

					addv va12 1

				endi

			endi

		next

		targ ownr





		doif va12 lt 6

			new: simp 2 11 50201 "moe_C2toDS_potato" 8 1 1001

			mvto va00 va01

			setv ov02 post

			subv ov02 15

			setv ov01 post

			kill ownr

		else

			gsub die

		endi



	retn



	subr die

		doif time eq 4

			stop

		endi

*Don't die right off the bat, give us some time.

		addv ov03 1

		doif ov03 ge 50

			doif carr eq null

				altr -1 2 .02

				altr -1 3 .015

				altr -1 4 .0124

				kill ownr

			endi

		endi

	retn





endm



*Seed Install Script

scrp 2 3 50201 10

	inst

	bhvr 48

	attr 199

	elas 10

	fric 50

	perm 40

	accg 4

	aero 10

	tick rand 200 350

	rnge 200

*dcor 1

*core 0 wdth 0 10



endm



*Seed Eat Script

scrp 2 3 50201 12

*snde "chwp"

	snde "reat"

	stim writ from 77 1

	kill ownr

endm



scrp 2 11 50201 10

	inst

	attr 5

	elas 10

	fric 50

	perm 40

	accg 4

	aero 10

	tick rand 200 250

	plne rand 1000 5000

endm







scrp 2 11 50201 9

	doif time eq 4

		stop

	endi





	doif ov04 ne 1

		doif pose lt 4

			tick rand 250 350

			setv va00 pose

			addv va00 1

			pose va00

			stop

		elif pose eq 4 and post gt ov02

			loop

				setv va00 post

				subv va00 1

				mvto posl va00

				wait 5

			untl post le ov02

*You'r Ripe, Become edible.

*You can be seen, picked up.

			attr 3

			bhvr 51

			emit 8 .15

*You're RIPE - ov04

			setv ov04 1

*tick 1500

			tick 1500

			stop

		endi

	elif ov04 eq 1

*Detritus

		reps rand 1 3

			gsub seed

		repe



*loop

		doif carr eq null

			gsub detritus

		endi

*untl carr eq null



	endi







	subr seed

		setv ov05 posx

		setv ov06 post

		inst

		new: simp 2 3 50201 "moe_C2toDS_potato" 9 0 1001

		mvsf mv05 mv06

		setv velx rand -15 15

		setv vely rand -5 -10

		targ ownr

	retn



	subr detritus



		setv va00 posl

		setv va01 post



		doif mira eq 1

			setv va02 1

		else

			setv va02 0

		endi



		doif pose eq 4

			setv va03 0

		else

			setv va03 1

		endi



		new: simp 2 10 50201 "moe_C2toDS_potato" 2 7 1001

		mvto va00 va01

		pose va03

		mira va02

		kill ownr

	retn

endm



scrp 2 11 50201 1

	mesg writ ownr 12

endm



scrp 2 11 50201 2

	mesg writ ownr 12

endm





*PICK UP CARROT*

scrp 2 11 50201 4

	inst

	lock

	attr 199

	accg 4

	perm 51

	doif pose eq 4

		pose 5

		mira rand 0 1

	elif pose eq 6

		pose 7

		mira rand 0 1

	endi

endm







*DETRITUS





*PICK UP CARROT DETRITUS*

scrp 2 10 50201 4

	attr 199

	perm 51

	doif pose eq 0

		pose 1

		mira rand 0 1

	elif pose eq 1

		pose 1

		mira rand 0 1

	endi

endm







scrp 2 10 50201 10

	inst

	attr 7

	elas 10

	fric 50

	perm 40

	accg 4

	aero 10

	tick rand 200 250

*tick 50

	plne rand 1000 5000

endm



scrp 2 10 50201 9

	doif carr ne null

		stop

	endi

	addv ov00 1

	doif ov00 ge 10

		kill ownr

	endi

endm



scrp 2 11 50201 6

	sndc "dr10"

endm





*EAT CARROT*

scrp 2 11 50201 12

	sndc "chwp"

	wait 3

	doif pose eq 4 or pose eq 5

		targ from

*		chem 5 .5

		chem 150 -.5

		chem 33 .5

		chem 149 -.5

		chem 12 .5

		stim writ from 79 1

		targ ownr

		gsub seed

	elif pose eq 6 or pose eq 7

		targ from

		chem 79 .15

*		chem 5 .15

		chem 75 .125

		chem 150 -.15

		chem 33 .15

		chem 149 -.15

*		chem 12 .15

		stim writ from 81 1

		targ ownr

		gsub seed

	endi

	targ ownr

	kill targ



	subr seed

		setv ov07 1

		setv va00 posx

		setv va01 post

		inst

		new: simp 2 3 50201 "moe_C2toDS_potato" 9 10 1001

		mvsf va00 va01

		setv velx rand -15 15

		setv vely rand -5 -10

	retn





endm



scrp 2 10 50201 12

	stim writ from 81 1

	targ from

	chem 79 .15

*	chem 5 .15

	chem 75 .125

	chem 150 -.15

	chem 33 .15

	chem 149 -.15

*	chem 12 .15

	targ ownr

	gsub seed





	subr seed

		setv ov07 1

		setv va00 posx

		setv va01 post

		inst

		new: simp 2 3 50201 "moe_C2toDS_potato" 9 10 1001

		mvsf va00 va01

		setv velx rand -15 15

		setv vely rand -5 -10

		kill ownr

	retn





endm



scrp 2 24 50209 10

	attr 199

	accg 4

	aero 2

	elas 25

	perm 51

	bhvr 1

	emit 10 .25

endm



scrp 2 17 50202 10

	mira rand 0 1

	perm .51

	attr 192

	elas 0

	accg .5

	tick rand 200 400

	rnge 500

	setv ov00 0

endm



scrp 2 17 50202 9



	doif rtyp room ownr eq 8 or rtyp room ownr eq 9

		kill ownr

	endi



	doif fall eq 0 and carr eq null

		doif ov00 eq 0

			gsub grow

		elif ov00 eq 1

			gsub wait

		elif ov00 eq 2

			gsub spore

		else

			gsub die

		endi

	endi



	subr grow

		setv va00 pose

		addv va00 1

		pose va00

		doif pose eq 9

			setv ov00 1

		endi

		stop

	retn



	subr wait

		setv ov00 2

		tick rand 200 400

		stop

	retn



	subr spore

		tick 0

		base 9

		anim [0 1 2 3 4 5]

		over

*moved the setvs to the bottom

		inst

		setv va02 1

		reps 3

			setv va00 posl

			setv va01 post

			new: simp 2 20 50202 "moe_C2toDS_puffball" 7 22 2999

			setv ov01 rand 10 40

			mvsf va00 va01

			doif va02 eq 1

				doif tmvb -7 -3 eq 1

					mvby -7 -3

					setv ov10 -1

				else

					kill targ

				endi

			elif va02 eq 2

				doif tmvb 13 -13 eq 1

					mvby 13 -13

					setv ov10 0

				else

					kill targ

				endi

			else

				doif tmvb 29 -3 eq 1

					mvby 29 -3

					setv ov10 1

				else

					kill targ

				endi

			endi

			doif targ ne null

				anim [0 1 2 3 4 5 255]

				tick 1

				addv va02 1

			endi

			targ ownr

		repe

		slow

		targ ownr

		base 9

		anim [5 4 3 2 1 0]

		over

		setv ov00 3

		tick rand 200 400

		stop



	retn



	subr die

		base 0

		doif pose eq 21

			altr -1 4 .025

			kill ownr

		endi

		doif pose eq 20

			pose 21

		endi

		doif pose eq 19

			pose 20

		endi

		doif pose eq 9

			pose 19

		endi

		stop

	retn

endm





scrp 2 20 50202 10

	attr 195

	bhvr 48

	elas 0

	accg .05

	puhl -1 14 22

	rnge 500

	tick 1

endm



scrp 2 20 50202 12

	lock

	stim writ from 26 1

	stim writ from 76 .5

	stim writ from 77 .5

	targ from

	chem 72 .25

	kill ownr

	unlk

endm





scrp 2 20 50202 9

	doif ov00 eq 0

		gsub fly

	endi

	doif ov00 eq 1 and fall eq 0 and carr eq null

		gsub grow

	endi



	subr fly

		tick 3

		doif ov10 eq -1

			setv va00 rand -5 -1

		elif ov10 eq 0

			setv va00 rand -4 4

		else

			setv va00 rand 1 5

		endi

		setv va01 rand -8 -1

		setv velx va00

		setv vely va01

		subv ov01 1

		doif ov01 le 0

			accg 1

			wait 5

			pose 6

			setv ov00 1

			tick rand 200 400

		endi

		stop

	retn



	subr grow

		etch 2 17 50202

			kill ownr

		next

		setv va00 0

		esee 2 17 50202

			addv va00 1

		next

		doif va00 gt 3

			kill ownr

		endi



		setv va10 grap posx posy

		setv va11 prop va10 4

		setv va12 prop va10 2



		doif va10 eq 8 or va00 eq 9

			kill ownr

		endi



		doif va11 lt .02

			kill ownr

		endi



		doif va11 lt .08

			setv va00 rand 0 1

			doif va00 eq 0

				kill ownr

			endi

		endi



		doif va12 lt .02

			kill ownr

		endi



		doif va11 gt .9

			kill ownr

		endi



* NOW GROW MY PRETTIES HAHAHAHAHAAAAHHH!!!

		altr -1 4 -.025

		setv va00 posl

		subv va00 10

		setv va01 post

		subv va01 10

		inst

		new: simp 2 17 50202 "moe_C2toDS_puffball" 22 0 3000

		mvsf va00 va01

		slow

		kill ownr

		stop



	retn

endm





scrp 2 20 50202 5

	setv ov01 rand 10 20

	anim [0 1 2 3 4 5 255]

	tick 3

	loop

		doif ov10 eq -1

			setv va00 rand -5 -1

		elif ov10 eq 0

			setv va00 rand -4 4

		else

			setv va00 rand 1 5

		endi

		setv va01 rand -8 -1

		setv velx va00

		setv vely va01

		subv ov01 1

	untl ov01 le 0

	accg 1

	wait 5

	pose 6

	setv ov00 1

	tick rand 200 400

	stop

endm







scrp 2 24 50209 1

	lock

	stim writ from 90 1

	anim [0 1 2 3 4 5]

	over

	setv va00 posl

	setv va01 post

	inst

	setv va02 1

	reps 3

		new: simp 2 20 50202 "moe_C2toDS_puffball" 7 22 2999

		setv ov01 rand 10 40



		mvsf va00 va01

		doif va02 eq 1

			mvby -7 -3

			setv ov10 -1

		elif va02 eq 2

			mvby 13 -13

			setv ov10 0

		else

			mvby 29 -3

			setv ov10 1

		endi

		anim [0 1 2 3 4 5 255]

		tick 1

		addv va02 1

	repe

	slow

	targ ownr

	anim [5 4 3 2 1 0]

	unlk

endm



scrp 2 24 50209 6

	lock

	sndc "drop"

	over

	wait 2

	unlk

endm



scrp 2 6 50202 9



	tick rand 100 200



	doif totl 2 8 50202 lt 15

*	setv va00 2

		setv va00 rand 0 1

		doif va00 eq 0

			setv va01 rand 3773 3903

			setv va02 rand 48324 48398

		elif va00 eq 1

			setv va01 rand 3702 3840

			setv va02 rand 48147 48218

		endi

		gsub makearnicaberries

	endi



	subr makearnicaberries

		new: simp 2 8 50202 "moe_C2toDS_berries" 0 9 8001

		mvsf va01 va02

	retn

endm



scrp 2 8 50202 10

	inst

	perm rand 45 55

	bhvr 49

	accg 0

	attr 195

	elas 10

	fric 50

	tick rand 50 100

	emit 6 .15

endm



scrp 2 8 50202 9

	doif carr eq null

		addv ov00 1

		doif ov00 ge rand 10 50 and accg ne 4

			accg 4

			velo rand -5 5 0

		endi



		doif ov00 ge rand 125 150

			kill targ

		endi

	endi

endm



scrp 2 8 50202 1

	mesg writ targ 12

endm



scrp 2 8 50202 4

	plne rand 4000 6000

endm



scrp 2 8 50202 5

	accg 4

endm



scrp 2 8 50202 6

	sndc "dr12"

endm





scrp 2 8 50202 12

	sndc "chwp"

	stim writ from 78 1

	targ from

*Hunger for Fat 50*

	chem 151 -.23

*Hunger for Starch 50*

	chem 150 -.19

*Hunger for Protein 50*

	chem 149 -.23

*Fat* 60

*	chem 10 .23

*Starch 50*

*	chem 5 .19

*Protein 60*

*	chem 12 .23

*Vitamin C 20*

	chem 99 .19

	targ ownr

	wait 1

	kill targ

endm











scrp 2 23 50209 10

	attr 199

	accg 3

	elas 0

	perm 51

	mesg writ targ 0

endm



scrp 2 23 50209 6

	lock

	sndc "drop"

	over

	wait 2

	unlk

endm



scrp 2 23 50209 1

	lock

	prt: send 0 255

*sndc "m_a7"

	sndc "wirr"

	anim [0 1 2 3 4 5 4 3 2 1]

	wait 7

	sndc "pop4"

	setv va00 posx

	subv va00 3

	setv va01 post

	addv va01 10

*Create Tendril Seed*



	new: simp 2 3 50220 "moe_C2toDS_tend" 1 6 rand 50 2000

	mvsf va00 va01

	setv va00 rand -100 100

	divv va00 10

	velo va00 -10

	unlk

endm





*Seed Create Script

scrp 2 3 50220 10

	inst

	perm 51

	attr 195

	bhvr 48

	accg 3

	elas 25

	aero 4

	emit 7 .15

	tick rand 200 300

	mira rand 0 1

endm



*Seed Timer

scrp 2 3 50220 9



	doif game "TMOD" eq 4

*stop

	endi



*A tendril can't grow if the celing is too low.

	doif obst _up_ lt 150

		stop

	endi



	doif carr ne null

		stop

	endi



	gsub check



	subr check

		setv va00 0

		esee 2 5 50203

			doif targ ne null

				addv va00 1

			endi

		next

		targ ownr

		doif va00 lt 3

			gsub grow

		else

			addv ov10 1

			doif ov10 ge 20

				kill ownr

			endi

		endi

	retn



	subr grow

		setv va00 posx

		subv va00 44

		setv va01 posb

		subv va01 124

		new: simp 2 5 50203 "moe_C2toDS_tend" 21 8 rand 50 2500

		doif tmvt va00 va01 ne 1

			mvsf va00 va01

		else

			mvto va00 va01

		endi

		kill ownr

	retn



endm



scrp 2 3 50220 6

	sndc "dr64"

endm



scrp 2 3 50220 12

	stim writ from 79 1

	snde "chwp"

	kill ownr

endm



*Tendril Create

scrp 2 5 50203 10

	perm 51

	attr 195

	accg 3

	elas 0

	dcor 0

	core 100 124 40 48

	fric 20

	tick rand 200 300

	seta ov07 null

	bhvr 0

endm



scrp 2 5 50203 9



	doif pose lt 6

		setv va00 pose

		addv va00 1

		pose va00

		stop

	else

		attr 199

		bhvr 11

	endi



*You're looking for detritus*

	doif ov07 eq null

		star 2 10 0

		doif targ ne null

			seta mv07 targ

			targ ownr

		else

			targ ownr

			tick rand 200 300



			addv ov10 1

			doif ov10 ge 30

				setv va00 posx

				setv va01 posb

				new: simp 2 3 50220 "moe_C2toDS_tend" 1 6 rand 50 2000

				mvsf va00 va01



				targ ownr

				doif pose lt 50

					frat 50

					anim [14 15 16 17 18 19 20]

					over

					wait 50

					kill ownr

				endi

				stop

			endi

		endi

	else

		tick 10

		doif seee ownr ov07 ne 1

			seta ov07 null

			stop

		endi

		targ ov07

		doif targ ne null

			setv va00 posx

		endi

		targ ownr



		doif posx lt va00

			mira 0

		elif posx gt va00

			mira 1

		endi



		gsub walk

		doif touc ownr ov07 eq 1

			inst

			targ ov07

			mesg writ targ 12

			snde "gulp"

			slow

		endi

	endi



	subr walk

		reps rand 4 5

			frat 2

			anim [6 7 8 9 10]

			doif mira eq 0

				addv velx 5

			else

				subv velx 5

			endi

			over

		repe

	retn



endm





scrp 2 5 50203 1



*Poke Norns, Move



	stim writ from 83 1



	doif from ne pntr

		doif relx ownr from gt 0

			mira 1

		else

			mira 0

		endi

	else

		sndc "stng"

		targ from

		setv va00 posl

		targ ownr

		doif posx gt va00

			mira 0

		else

			mira 1

		endi

	endi





	reps rand 4 5

		frat 2

		anim [6 7 8 9 10]

		doif mira eq 0

			addv velx 5

		else

			subv velx 5

		endi

		over

	repe





endm



scrp 2 5 50203 2

	stim writ from 83 1

	mesg writ ownr 0

endm



scrp 2 5 50203 3

	stim writ from 83 1

	mesg writ ownr 0

endm







scrp 2 4 50200 10

	inst

	attr 192

	elas 0

	fric 60

	perm 60

	accg 4

	tick rand 150 250

	seta ov01 null

	seta ov02 null

	seta ov03 null

	mira rand 0 1

endm



scrp 2 4 50200 9

	doif pose lt 6

		tick rand 150 250

		setv va00 pose

		addv va00 1

		pose va00

		stop

	elif pose eq 6

		tick rand 350 450

		inst

		pose 7

		doif ov01 eq null

			gsub getposxposy

			gsub lefttom

			pose 3

			targ ownr

		endi

		doif ov02 eq null

			gsub getposxposy

			gsub middletom

			pose 3

			targ ownr

		endi



		doif ov03 eq null

			gsub getposxposy

			gsub righttom

			pose 3

			targ ownr

		endi

		slow

	endi





	doif ov01 eq null

		gsub getposxposy

		gsub lefttom

		targ ownr

	endi

	doif ov02 eq null

		gsub getposxposy

		gsub middletom

		targ ownr

	endi



	doif ov03 eq null

		gsub getposxposy

		gsub righttom

		targ ownr

	endi



	doif time eq 4

		stop

	endi



	addv ov10 1



	doif ov10 ge 40 and ov10 lt 45

		doif ov01 ne null

			targ ov01

			doif pose eq 3

				mesg writ targ 1001

				velo rand -5 2 -5

			endi

			targ ownr

			stop

		endi

		doif ov02 ne null

			targ ov02

			doif pose eq 3

				mesg writ targ 1001

				velo rand -5 2 -5

			endi

			targ ownr

			stop

		endi

		doif ov03 ne null

			targ ov03

			doif pose eq 3

				mesg writ targ 1001

				velo rand -5 2 -5

			endi

			targ ownr

			stop

		endi

	endi

	doif ov10 ge 50

		doif ov01 ne null and ov02 ne null and ov03 ne null

			inst

			lock

			targ ov01

			kill targ

			targ ownr

			targ ov02

			kill targ

			targ ownr

			targ ov03

			kill targ

			targ ownr

			frat 200

			pose 6

			anim [8 9 10 11 12 13 14]

			over

			kill ownr

			lock

		endi

	endi



	subr getposxposy

		setv va00 posl

		setv va01 post

		setv va02 plne

		setv va03 mira

	retn



	subr lefttom

		inst

		addv va01 8

		doif mira eq 0

			addv va00 1

		else

			addv va00 25

		endi

		new: simp 2 8 50200 "moe_C2toDS_toms" 23 15 va02

		mira va03

		frel ownr

		mvto va00 va01

		setv ov00 1

		seta mv01 targ

		seta ov01 ownr

		setv ov02 1

	retn



	subr middletom

		inst

		addv va01 25

		doif mira eq 0

			addv va00 24

		else

			addv va00 2

		endi

		new: simp 2 8 50200 "moe_C2toDS_toms" 23 15 va02

		mira va03

		base 4

		pose 0

		frel ownr

		mvto va00 va01

		setv ov00 1

		seta mv02 targ

		seta ov01 ownr

		setv ov02 2

	retn



	subr righttom

		inst

		addv va01 14

		subv va02 1

		doif mira eq 0

			addv va00 30

		else

			addv va00 5

		endi

		new: simp 2 8 50200 "moe_C2toDS_toms" 23 15 va02

		mira va03

		base 8

		pose 0

		frel ownr

		mvto va00 va01

		setv ov00 1

		seta mv03 targ

		seta ov01 ownr

		setv ov02 3

	retn

endm



scrp 2 8 50200 10

	inst

	perm 51

	elas 25

	aero 3

	puhl -1 24 16

	wait 1

	doif ov00 eq 1

		tick rand 125 250

*attr 228

		attr 229

	else

		tick rand 1000 2000

*attr 231

		pose 4

		base 12

		pose 0

		attr 195

		accg 3

	endi

	emit 6 .015

endm



scrp 2 8 50200 4

	inst

	call 1001 0 0

endm



scrp 2 8 50200 1001

	inst

	doif ov00 eq 1

		inst

		bhvr 48

		base 12

		pose 0

		attr 195

		accg 3

		tick rand 1000 2500

		setv ov00 0

		doif ov02 eq 1

			targ ov01

			seta ov01 null

			targ ownr

		elif ov02 eq 2

			targ ov01

			seta ov02 null

			targ ownr

		elif ov02 eq 3

			targ ov01

			seta ov03 null

			targ ownr

		endi

		doif carr eq null

			setv va00 posl

			subv va00 10

			mvsf va00 post

			perm 51

		endi

		slow

	endi

endm



scrp 2 8 50200 9



	doif time eq 4

		stop

	endi



	doif ov00 eq 1

		doif pose lt 3

			setv va00 pose

			addv va00 1

			pose va00

			stop

		else

			bhvr 48

			attr 227

		endi

	elif ov00 eq 0

		doif carr ne null or fall eq 1

			stop

		endi

		doif time ne 4 and time ne 0

			lock

			frat 75

			attr 195

			anim [0 1 2 3 4]

			over

			wait 75

			gsub check

			unlk

		endi

	endi



	subr check

		setv va20 grap posx posy



		setv va21 prop va20 1

		setv va22 prop va20 2

		setv va23 prop va20 3

		setv va24 prop va20 4

		setv va26 rtyp va20



		doif va26 ge 8 and va26 le 9

			kill targ

		endi



		esee 2 4 50200

			doif targ ne null

				addv va25 1

			endi

		next

		targ ownr

		doif va25 lt 4

			doif va21 gt .302157 and va22 ge .254510 and va23 ge .254510 and va24 ge .254510

				gsub grow

			else

				kill targ

			endi

		else

			kill targ

		endi



	retn



	subr grow

		setv va00 posl

		setv va01 post

		new: simp 2 4 50200 "moe_C2toDS_toms" 15 0 rand 1000 3000

		mvsf va00 va01

		kill ownr

	retn



endm



scrp 2 8 50200 12

	inst

	sndc "chwp"

	bhvr 32

	base 17

	pose 0

	stim writ from 78 1

	wait 1

	targ from

	chem 3 0.5

	chem 5 0.5

	chem 12 0.5

	chem 149 -.25

	wait 1

	targ ownr

endm



scrp 2 8 50200 1

*mesg writ targ 12

endm



scrp 2 8 50200 6

	sndc "dr12"

endm




scrp 2 3 50205 10

	inst

	emit 7 .015

	bhvr 48

	rnge 250

	attr 195

	accg 2

	aero .5

	elas 75

	perm 50

	slow

	wait 1

	frat 2

	anim [0 1 2 3 4 5 6 7 255]

	doif ov00 eq 0

		tick rand 20 25

	else

		tick rand 10 15

	endi

*tick 1

endm



scrp 2 3 50205 6

*accg 1

*anim [8]

	inst



	doif ov00 eq 1 and wall ne _up_

		velo rand -5 5 rand -5 -20

		snde "m_a8"

	endi







endm



*Seed Timer

scrp 2 3 50205 9



	doif ov00 eq 1

		addv ov03 1

		doif ov03 ge rand 5 15

			gsub pop

			tick rand 500 800

			setv ov00 3

		endi

	elif ov00 eq 0

		gsub pop

		setv ov00 3

	endi





	doif fall ne 0 or carr ne null

		stop

	endi



	doif time eq 4

		stop

	endi



	gsub check





	addv ov10 1



	doif ov10 ge 15

		kill ownr

	endi



	subr pop

		inst

		accg 1.5

		pose 8

		elas 10

		bhvr 48

		velo rand -7 7 rand -10 -10

		setv va00 posl

		subv va00 5

		setv va01 post

		subv va01 5

		lock

		new: simp 1 27 50205 "moe_C2toDS_triff" 4 17 5001

		attr 0

		mvto va00 va01

		anim [0 1 2 3]

		sndc "pop4"

		over

		kill targ

		unlk

		targ ownr

	retn



	subr check

		esee 2 7 50205

			addv va06 1

		next

		doif va06 lt 8

			setv va00 rtyp grap posx posy

			setv va05 grap posx posy

*light

			setv va01 prop va05 1

*heat

			setv va02 prop va05 2

*water

			setv va03 prop va05 3

*nutrients

			setv va04 prop va05 4

*can't grow underwater. :/

			doif va00 ne 8 and va00 ne 9

				doif va01 ge .15 and va02 ge .15 and va03 ge .2 and va04 ge .2

					doif pose eq 8

						gsub grow

					endi

				endi

			endi

		endi

	retn



	subr grow

		setv va00 posx

		subv va00 28

		setv va01 posb

		subv va01 48

		inst

		new: simp 2 7 50205 "moe_C2toDS_triff" 34 21 rand 1000 3000

		doif tmvt va00 va01 eq 1

			mvto va00 va01

		else

			mvsf va00 va01

		endi

		kill ownr

	retn



endm



*Plant Creation

scrp 2 7 50205 10

	inst

	emit 9 .015

	accg 0

	attr 196

	accg 4

	elas 0

	aero 1

	perm 51

	fric 100

	tick rand 200 350

	mira rand 0 1

	plne rand 500 2500

	setv name "nectar" 10

	seta ov03 null

	seta ov04 null

	seta ov05 null

endm

*Pollination Script

scrp 2 7 50205 1010

	setv name "pollinated" 1

endm



scrp 2 7 50205 255

	stop

endm



scrp 2 7 50205 9

*	doif name "nectar" lt 10

*		addv name "nectar" 1

*	endi

	doif time eq 4

*stop

	endi

	doif pose lt 8

		tick rand 200 350

		setv va00 pose

		addv va00 1

		pose va00

		over

		stop

	else

*Check to ensure you still have fruits, if not, compensate

		doif ov03 eq null

			setv ov00 0

		endi

		doif ov04 eq null

			setv ov01 0

		endi

		doif ov05 eq null

			setv ov02 0

		endi

*/*



		tick rand 300 500

		doif pose eq 8 and ov11 eq 0

			inst

			pose 9

			gsub setposxpost

			gsub fruitleft

			pose 4

			targ ownr

			setv ov00 1

			gsub setposxpost

			gsub fruitmiddle

			pose 4

			targ ownr

			setv ov01 1

			gsub setposxpost

			gsub fruitright

			pose 4

			targ ownr

			setv ov02 1

			slow

			setv ov11 1

		endi

	endi







	doif ov00 eq 0

		gsub setposxpost

		gsub fruitleft

		targ ownr

		setv ov00 1

	endi

	doif ov01 eq 0

		gsub setposxpost

		gsub fruitmiddle

		targ ownr

		setv ov01 1

	endi

	doif ov02 eq 0

		gsub setposxpost

		gsub fruitright

		targ ownr

		setv ov02 1

	endi



	addv ov10 1



	doif ov10 ge 47 and ov10 lt 50 and ov00 eq 1 and ov01 eq 1 and ov02 eq 1

		setv va00 rand 0 2

		doif va00 eq 0

			targ ov03

			doif pose eq 4

				mesg writ targ 1001

			endi

		elif va00 eq 1

			targ ov04

			doif pose eq 4

				mesg writ targ 1001

			endi

		elif va00 eq 2

			targ ov05

			doif pose eq 4

				mesg writ targ 1001

			endi

		endi

		targ ownr

	endi

	inst

	doif name "pollinated" eq 1

		inst

		doif ov10 ge 50 and ov00 eq 1 and ov01 eq 1 and ov02 eq 1

			doif ov03 ne null and ov04 ne null and ov05 ne null

				pose 10

				targ ov03

				kill targ

				targ ownr

				targ ov04

				kill targ

				targ ownr

				targ ov05

				kill targ

				targ ownr

			endi

			reps rand 2 4

				frat 3

				anim [10 11 12 13 14]

				over

				snde "pop3"

				gsub seed

			repe

			frat rand 200 255

			anim [14 15 16 17 18 19 20 21]

			over

			kill targ

		endi

		unlk

	endi

	slow





*//Subroutines!//*



	subr setposxpost

		targ ownr

		setv va00 posl

		setv va01 post

		setv va03 plne

		addv va03 1

	retn



	subr grow

		setv va00 pose

		addv va00 1

		pose va00

	retn



	subr fruitleft

		inst

		doif mira eq 0

			subv va00 7

			addv va01 10

		else

			setv va04 1

			addv va00 31

			addv va01 10

		endi

*left

		new: simp 2 8 50205 "moe_C2toDS_triff" 16 44 va03

		attr 229

		seta ov01 ownr

		frel ov01

		mvto va00 va01

		mira va04

*I am on the plant*

		setv ov00 1

		setv ov02 1

		seta mv03 targ

	retn



	subr fruitmiddle

		inst

		doif mira eq 0

			addv va00 10

			addv va01 0

		else

			setv va04 1

			addv va00 17

			addv va01 0

		endi

*Middle

		new: simp 2 8 50205 "moe_C2toDS_triff" 16 49 va03

		attr 229

		seta ov01 ownr

		frel ov01

		mvto va00 va01

		mira va04

*I am on the plant*

		setv ov00 1

		setv ov02 2

		seta mv04 targ

	retn



	subr fruitright

		inst

*Right

		doif mira eq 0

			addv va00 29

			addv va01 3

		else

			setv va04 1

			addv va00 3

			addv va01 3

		endi

		new: simp 2 8 50205 "moe_C2toDS_triff" 16 54 va03

		attr 229

		seta ov01 ownr

		frel ov01

		mvto va00 va01

		mira va04

*I am on the plant*

		setv ov00 1

		setv ov02 3

		seta mv05 targ

	retn



	subr seed

		setv va00 posx

		subv va00 10

		setv va01 posy

		subv va01 10

		setv va03 plne

		subv va03 1

		new: simp 2 3 50205 "moe_C2toDS_triff" 9 8 va03

		setv ov00 1

		mvsf va00 va01

		velo 0 rand -20 -15

		targ ownr

	retn





endm



*push triffid plant

scrp 2 7 50205 1



endm



scrp 2 8 50205 1

	inst

	doif ov00 eq 1 and pose ge 3

		setv va00 rand 0 2

		mesg writ targ 1001

	endi

endm



scrp 2 8 50205 6

	lock

	snde "dr12"

	unlk

endm



scrp 2 10 50205 6

	lock

	snde "dr12"

	unlk

endm



*Triffid Fruit

scrp 2 8 50205 10

	inst

	perm 51

	emit 6 .015

	accg 0

	elas 25

	attr 228

	wait 1

	doif pose lt 4

		setv va00 pose

		targ ov01

		setv va01 tick

		targ ownr

		loop

			wait va01

			addv va00 1

			pose va00

			bhvr 48

			attr 231

		untl va00 eq 4

	else

		attr 231

		bhvr 48

	endi

	tick rand 1000 3000



endm



scrp 2 8 50205 9

	doif ov00 eq 0 and carr eq null

		setv va00 posl

		setv va01 post

		new: simp 2 10 50205 "moe_C2toDS_triff" 0 60 rand 1000 3000

		mvsf va00 va01

		kill ownr

	endi

endm

*Detritus Create

scrp 2 10 50205 10

	inst

	attr 195

	bhvr 48

	elas 0

	accg 4

	tick 500

	perm 51

	puhl -1 16 22

endm



scrp 2 10 50205 9

	doif carr eq null

		altr -1 2 .005

		altr -1 3 .025

		altr -1 4 .025

		kill targ

	endi

endm



scrp 2 10 50205 12

	lock

	stim writ from 81 1

	targ from

*	chem 5 .15

	snde "chwp"

	targ ownr

	kill targ



endm



scrp 2 8 50205 12

	lock

	stim writ from 78 1

	targ from

*	chem 5 .31

	snde "chwp"

	targ ownr

	setv va00 posl

	setv va01 post

	new: simp 2 10 50205 "moe_C2toDS_triff" 0 60 rand 1000 3000

	mvsf va00 va01

	kill ownr

endm



scrp 2 3 50205 12

	stim writ from 77 1

	targ from

*	chem 5 .19

*	chem 10 .19

	snde "chwp"

	targ ownr

	kill targ

endm



scrp 2 8 50205 4

	inst

	puhl -1 16 22

	mesg writ targ 1001

endm



scrp 2 8 50205 1001

	inst

	accg 2

	aero 4

	bhvr 48

	attr 199

	doif ov00 eq 1

		doif ov02 eq 1

			mira 0

			pose 15

			targ ov01

			setv ov00 0

		elif ov02 eq 2

			mira rand 0 1

			pose 10

			targ ov01

			setv ov01 0

		else

			mira 1

			pose 5

			targ ov01

			setv ov02 0

		endi

		targ ownr

	endi

	setv ov00 0

	doif carr eq null

		mvsf posl post

	endi

endm



****************************************


scrp 2 3 50203 10

	inst

	attr 195

	elas 20

	perm 51

	fric 30

	bhvr 48

	tick rand 20 40

	slow

	wait 3

	emit 7 .2

	doif ov01 eq 0

		accg 3

	else

		accg .05

		frat 2

		anim [1 2 3 4 5 255]

	endi

endm



scrp 2 3 50203 6

	sndc "dr64"

endm



scrp 2 3 50203 12

	stim writ from 77 1

	targ from

	chem 5 .19

	chem 10 .19

	snde "chwp"

	targ ownr

	kill targ

endm



scrp 2 3 50203 9





	doif ov01 eq 0

		tick rand 250 500

		doif time eq 4

			stop

		endi

		addv ov02 1

		doif ov02 gt 10

			kill targ

		endi

	else

		velo rand -1 2 rand -2 0

		addv ov02 1

		doif ov02 gt rand 20 35

			setv va00 posl

			setv va01 post

*sndc "pop1"

			reps 3

				new: simp 2 3 50203 "moe_C2toDS_trumpet" 10 65 rand 500 2500

				mvsf va00 va01

				velo rand -3 3 rand -1 0

				targ ownr

			repe

			kill ownr

		endi

		stop

	endi



	doif ov02 gt 10



	endi



	gsub check



	subr check

		rnge 200

		esee 2 7 50203

			doif targ ne null

				addv va02 1

			endi

		next

		targ ownr



		doif va02 ge 3 or sean eq 3

			gsub dormantcheck

			stop

		endi



		doif carr ne null or fall eq 1

			stop

		endi

		setv va00 grap posx posy

*light

		setv va01 prop room ownr 1

*heat

		setv va02 prop room ownr 2

*water

		setv va03 prop room ownr 3

*nutrients

		setv va04 prop room ownr 4



		doif va00 gt .2 and va01 gt .2 and va03 gt .25 and va04 gt .2

			doif rtyp grap posx posy eq 8 or rtyp grap posx posy eq 9

				kill ownr

			endi

			gsub grow

		else

			gsub dormantcheck

		endi

	retn





	subr dormantcheck

		rnge 200

		setv va00 0

		esee 2 3 50203

			doif targ ne null

				addv va00 1

			endi

		next

		targ ownr

		doif va00 gt 3

*Let something eat you?

			wait rand 1500 2000

			kill ownr

		else

			show 0

			bhvr 0

			attr 193

			tick 1200

		endi

	retn





	subr grow

		setv va00 posl

		setv va01 posb

		subv va00 24

		subv va01 39



		new: simp 2 7 50203 "moe_C2toDS_trumpet" 31 19 rand 500 2500

		mvsf va00 va01



		kill ownr

	retn



endm



scrp 2 7 50203 10

	inst

	attr 193

	elas 20

	perm 51

	fric 30

	accg 3

	tick 58.5

	emit 9 .05

*tick 1

	seta ov04 null

	seta ov05 null

	seta ov06 null

	mira rand 0 1

endm



scrp 2 7 50203 9



*flowers sleep at night

	doif time eq 3

	elif time eq 0 and pose eq 9

*Seed in the morning

		doif name "seeded" eq 0

			gsub seed

		endi

	endi



*lifeforce

	addv ov10 3



*Flowers die in one day. That's 1440 seconds.

	doif ov10 ge 1440

		inst

		doif ov00 eq 1 and ov01 eq 1 and ov02 eq 1

			doif ov04 ne null and ov05 ne null and ov06 ne null

				pose 17

				targ ov04

				kill targ

				targ ownr

				targ ov05

				kill targ

				targ ownr

				targ ov06

				kill targ

				targ ownr

				frat tick

				anim [17 18 19 20 21 22 23 24]

				over

				kill targ

			endi

		endi

	endi



	doif pose lt 8

		setv va00 pose

		addv va00 1

		pose va00

		stop

	elif pose eq 8

		pose 9

*left

		gsub growfirst



		stop

	endi



	doif ov04 eq null

		setv ov00 0

	elif ov05 eq null

		setv ov01 0

	elif ov06 eq null

		setv ov02 0

	endi





	doif ov00 eq 0

		gsub setcoords

		gsub growleft

		targ ownr

		setv ov00 1

	endi

	doif ov01 eq 0

		gsub setcoords

		gsub growmiddle

		targ ownr

		setv ov01 1

	endi

	doif ov02 eq 0

		gsub setcoords

		gsub growright

		targ ownr

		setv ov02 1

	endi



	subr seed

*Make sure all flower fruits are on, or this is gonna look funky. lol

		doif ov00 eq 1 and ov01 eq 1 and ov02 eq 1

			inst

			pose 8

*kill them

			targ ov04

			kill targ

			targ ownr

			targ ov05

			kill targ

			targ ownr

			targ ov06

			kill targ

			targ ownr



*animate

			frat tick

			anim [8 10 11 12 13 14]

			over



			setv va00 posx

			setv va01 posy





			new: simp 2 3 50203 "moe_C2toDS_trumpet" 10 65 rand 500 2500

			mvsf va00 va01

			setv ov01 1

			addv vely rand -2 -3



			targ ownr



			anim [14 15 16 8]

			over

			setv name "seeded" 1

			gsub growfirst

			targ ownr

			pose 9

			stop

		endi

	retn







	subr setcoords

		targ ownr

		setv va00 posx

		setv va01 posy

	retn



	subr growfirst

		inst

		gsub setcoords

		gsub growleft

		pose 4

		gsub setcoords

		gsub growmiddle

		pose 4

		gsub setcoords

		gsub growright

		pose 4

		slow

	retn



	subr growleft

		inst

		doif mira eq 0

			subv va00 27

		else

			addv va00 8

		endi



		setv va04 mira

		setv va05 plne



		new: simp 2 8 50203 "moe_C2toDS_trumpet" 7 44 va05

		attr 231

		seta ov01 ownr

		frel ov01

		mvto va00 va01

		mira va04

*I am on the plant*

		setv ov00 1

		seta mv04 targ

		setv mv00 1

		setv ov02 1





	retn



	subr growmiddle

		inst

		doif mira eq 0

			subv va00 22

			subv va01 27

		else

			subv va00 9

			subv va01 27

		endi



		setv va04 mira

		setv va05 plne



		new: simp 2 8 50203 "moe_C2toDS_trumpet" 7 51 va05

		attr 231

		seta ov01 ownr

		frel ov01

		mvto va00 va01

		mira va04

*I am on the plant*

		setv ov00 1

		seta mv05 targ

		setv mv01 1

		setv ov02 2



	retn



	subr growright

		inst

		doif mira eq 0

			addv va00 8

			subv va01 17

		else

			subv va00 28

			subv va01 17

		endi



		setv va04 mira

		setv va05 plne



		new: simp 2 8 50203 "moe_C2toDS_trumpet" 7 58 va05

		attr 231

		seta ov01 ownr

		frel ov01

		mvto va00 va01

		mira va04

*I am on the plant*

		setv ov00 1

		seta mv06 targ

		setv mv02 1

		setv ov02 3



	retn

endm



scrp 2 8 50203 4

	inst

	puhl -1 16 22

	mesg writ targ 1001

endm



scrp 2 8 50203 1

	inst

*mesg writ targ 12

	doif ov00 eq 1

		mesg writ targ 1001

	endi



	doif from eq pntr and ov00 eq 1

		setv va00 posx

		targ pntr

		doif posl gt va00

			setv va00 -10

		else

			setv va00 10

			setv va01 1

		endi

		targ ownr

		velo va00 rand -5 -10

		targ pntr

		doif va01 eq 0

			anim [4 5 4 0]

		else

			anim [10 11 12 0]

		endi

		sndc "smck"

		targ ownr

		over

	endi







endm



scrp 2 8 50203 1001

	inst

	accg 2

	aero 4

	bhvr 48

	attr 199

	doif ov00 eq 1

		doif ov02 eq 1

			mira rand 0 1

			pose 5

			targ ov01

			setv ov00 0

		elif ov02 eq 2

			mira rand 0 1

			pose 5

			targ ov01

			setv ov01 0

		else

			mira rand 0 1

			pose 5

			targ ov01

			setv ov02 0

		endi

		targ ownr

	endi

	targ ownr

	setv ov00 0

	doif carr eq null

		mvsf posl post

	endi

endm



scrp 2 8 50203 6

	lock

	snde "dr12"

	unlk

endm



*Trumpet Fruit

scrp 2 8 50203 10

	inst

	perm 51

	emit 6 .015

	accg 0

	elas 25

	attr 231

	wait 1

	doif pose lt 4

		setv va00 pose

		targ ov01

		setv va01 tick

		targ ownr

		loop

			wait va01

			addv va00 1

			pose va00

			bhvr 48

		untl va00 eq 4

	else

		bhvr 48

	endi

	tick rand 1000 3000

endm



scrp 2 8 50203 9

	doif carr eq null and ov00 eq 0



		doif ov02 eq 1

			setv va02 50

		elif ov02 eq 2

			setv va02 57

		else

			setv va02 64

		endi



		setv va03 mira



		setv va00 posl

		setv va01 post

		new: simp 2 10 50203 "moe_C2toDS_trumpet" 0 va02 rand 500 2500

		mvsf va00 va01

		mira va03

		kill ownr



	endi

endm





*Detritus Create

scrp 2 10 50203 10

	inst

	attr 195

	bhvr 48

	elas 0

	accg 4

	tick 500

	puhl -1 16 22

endm



scrp 2 10 50203 9

	doif carr eq null

		altr -1 2 .005

		altr -1 3 .025

		altr -1 4 .025

		kill targ

	endi

endm







scrp 2 10 50203 12

	lock

	stim writ from 81 1

	targ from

	chem 5 .15

	snde "chwp"

	targ ownr

	kill targ

endm



scrp 2 8 50203 12

	lock

	stim writ from 78 1

	targ from

	chem 5 .31

	snde "chwp"

	targ ownr



	doif ov02 eq 1

		setv va02 50

	elif ov02 eq 2

		setv va02 57

	else

		setv va02 64

	endi



	setv va03 mira



	setv va00 posl

	setv va01 post

	new: simp 2 10 50203 "moe_C2toDS_trumpet" 0 va02 rand 500 2500

	mvsf va00 va01

	mira va03

	kill ownr

endm





scrp 2 6 50200 10

	tick 1

	bhvr 11

	attr 0

	frat 5

endm

*timer

scrp 2 6 50200 9

*	doif pose lt 10

*		setv va00 pose

*		addv va00 1

*		pose va00

*	endi

*stop



	doif sean lt 3

		loop

			setv va02 rand posl posr

			setv va03 rand post posb

		untl tran va02 va03 eq 0



		subv va03 7



		setv va04 plne

		subv va04 1



		esee 2 3 50226

			doif targ ne null

				addv va00 1

			endi

		next

		targ ownr

		doif va00 lt 30

			new: simp 2 3 50226 "moe_C2toDS_pidgeonlauncher" 21 17 va04

			mvsf va02 va03

			targ ownr

		endi

	endi





*stop



	tick 500

**If it's springtime, grow each day till maturity

	doif sean eq 0

		doif date eq 0

			pose 0

		elif date eq 1

			pose 1

		elif date eq 2

			pose 2

		elif date eq 3

			pose 3

		endi

	elif sean eq 1

*Summer

		doif date eq 0

			pose 4

		elif date eq 1

			pose 5

		endi

	elif sean eq 2

		doif date eq 0

			pose 6

		elif date eq 1

			pose 7

		elif date eq 2

			pose 8

		elif date eq 3

			pose 9

		endi

	elif sean eq 3

		pose 10

	endi







endm

*activate 1

scrp 2 6 50200 1

	doif crea from eq 1

		stim writ from 84 1

	endi

endm

*collision

scrp 2 6 50200 6

*snde "drop"

endm

*eat

scrp 2 6 50200 12

endm







*deactivate

scrp 2 6 50200 0

	doif crea from eq 1

		stim writ from 84 1

	endi

endm

*activate 2

scrp 2 6 50200 2

	doif crea from eq 1

		stim writ from 84 1

	endi

endm

*hit

scrp 2 6 50200 3

	doif crea from eq 1

		stim writ from 84 1

	endi

endm

*catchall

scrp 2 6 50200 255

endm





scrp 2 3 50226 10

	inst

	accg 0

	attr 195

	bhvr 48

	elas 50

	aero 5

	perm rand 50 51

	tick rand 1000 1200

	mira rand 0 1

endm



scrp 2 3 50226 9

	doif ov00 eq 0 and ov01 eq 0

		addv ov00 1

		call 5 0 0

	endi

	doif ov00 ge 1

		lock

		anim [ 17 18 19]

		over

		kill ownr

	endi

endm



scrp 2 3 50226 4

	pose 0

endm



scrp 2 3 50226 5

	inst

	setv ov01 1

	accg .2

	anim [ 0 1 2 3 4 5 6]

	over

	frat 2

	anim [ 6 7 8 9 10 11 12 255]

	loop

		inst

		doif rtyp room ownr eq 8 or rtyp room ownr eq 9

			accg .05

		else

			accg .2

		endi

		addv velx rand -2 2

		wait 5

	untl fall eq 0

endm



scrp 2 3 50226 6

	accg 3

	snde "dr64"

	doif pose lt 13

		anim [13 14 15 16]

		over

	endi

endm



scrp 2 3 50226 12

	doif crea from eq 1

		stim writ from 77 1

	endi

	snde "reat"

	kill ownr

endm








**##Remover Scripts##**

rscr



enum 2 6 50205

	kill targ

next

enum 2 10 50214

	kill targ

next



enum 2 8 50217

	kill targ

next



enum 2 3 50214

	kill targ

next


enum 2 6 50208

	kill targ

next

enum 2 8 50208

	kill targ

next

scrx 2 6 50208 9

scrx 2 8 50208 9

scrx 2 8 50208 6

scrx 2 8 50208 5

scrx 2 8 50208 12


enum 2 4 50217

	kill targ

next

enum 2 11 50217

	kill targ

next

enum 2 10 50217

	kill targ

next




*loop through all possible scripts up to 2000 and remove them.

loop

	addv va00 1

	scrx 2 4 50217 va00

	scrx 2 11 50217 va00

	scrx 2 10 50217 va00


untl va00 ge 2000



setv va00 0


enum 2 6 50213

	kill targ

next

enum 2 8 50213

	kill targ

next

scrx 2 6 50213 9

scrx 2 8 50213 9

scrx 2 8 50213 6

scrx 2 8 50213 5

scrx 2 8 50213 12




enum 2 8 50207

	kill targ

next


scrx 2 8 50207 9

scrx 2 8 50207 6

scrx 2 8 50207 5

scrx 2 8 50207 12





enum 2 3 50200

	kill targ

next



enum 2 10 50200

	kill targ

next



enum 2 11 50200

	kill targ

next




scrx 2 3 50200 9



scrx 2 3 50200 6



scrx 2 11 50200 9



enum 2 5 50200

	kill targ

next

enum 2 10 50207

	kill targ

next

enum 2 20 50200

	kill targ

next

enum 2 3 50218

	kill targ

next

scrx 2 5 50200 10

scrx 2 5 50200 9

scrx 2 5 50200 1

scrx 2 10 50207 10

scrx 2 10 50207 9

scrx 2 20 50200 10

scrx 2 20 50200 9

scrx 2 20 50200 12


*Branches

enum 2 6 50209

	kill targ

next



enum 2 6 50210

	kill targ

next



*nectar

enum 2 7 50209

	kill targ

next



*Summer Fruit

enum 2 8 50209

	kill targ

next



*Winter Fruit

enum 1 26 50210

	kill targ

next


enum 2 4 50204

	kill targ

next

enum 2 8 50214

	kill targ

next

scrx 2 4 50204 10

scrx 2 4 50204 1

scrx 2 4 50204 3

scrx 2 4 50204 6

scrx 2 4 50204 9

scrx 2 4 50214 10

scrx 2 4 50214 1

scrx 2 4 50214 3

scrx 2 4 50214 6

scrx 2 4 50214 9

scrx 2 4 50214 12


enum 2 24 50222

	kill targ

next



enum 2 3 50222

	kill targ

next



enum 2 3 50222

	kill targ

next



enum 2 4 50222

	kill targ

next


enum 2 6 50203

	kill targ

next

enum 2 20 50203

	kill targ

next

scrx 2 6 50203 9

scrx 2 20 50203 9

scrx 2 20 50203 6

scrx 2 20 50203 5

scrx 2 20 50203 12


enum 2 6 50212

	kill targ

next

enum 2 8 50212

	kill targ

next

scrx 2 6 50212 9

scrx 2 8 50212 9

scrx 2 8 50212 6

scrx 2 8 50212 5

scrx 2 8 50212 12


enum 2 11 50209

	kill targ

next

enum 2 4 50201

	kill targ

next

scrx 2 4 50201 12



enum 2 24 50208

	kill targ

next

scrx 2 24 50208 1

scrx 2 24 50208 6


enum 2 23 50202

	kill targ

next

enum 2 3 50202

	kill targ

next

enum 2 4 50202

	kill targ

next


enum 2 23 50204

	kill targ

next

enum 2 3 50204

	kill targ

next

enum 2 7 50204

	kill targ

next



enum 2 8 50204

	kill targ

next



enum 2 10 50204

	kill targ

next



scrx 2 3 50204 6


enum 2 23 50201

	kill targ

next



enum 2 3 50201

	kill targ

next



enum 2 10 50201

	kill targ

next



enum 2 11 50201

	kill targ

next





scrx 2 3 50201 9



scrx 2 3 50201 6

scrx 2 10 50201 6

scrx 2 11 50201 9



enum 2 17 50202

	kill targ

next

enum 2 20 50202

	kill targ

next

enum 2 24 50209

	kill targ

next


enum 2 6 50202

	kill targ

next

enum 2 8 50202

	kill targ

next

scrx 2 6 50202 9

scrx 2 8 50202 9

scrx 2 8 50202 6

scrx 2 8 50202 5

scrx 2 8 50202 12





inst



enum 2 23 50209

	kill targ

next



enum 2 3 50220

	kill targ

next



enum 2 5 50203

	kill targ

next



scrx 2 23 50209 1

scrx 2 23 50209 6

scrx 2 23 50209 10



scrx 2 3 50220 9

scrx 2 3 50220 10



scrx 2 3 50220 9

scrx 2 3 50220 10


enum 2 4 50200

	kill targ

next

enum 2 8 50200

	kill targ

next


enum 2 23 50205

	kill targ

next

enum 2 3 50205

	kill targ

next

enum 1 27 50205

	kill targ

next

enum 2 7 50205

	kill targ

next

enum 2 8 50205

	kill targ

next

enum 2 10 50205

	kill targ

next

scrx 2 3 50205 6

scrx 2 3 50205 5

scrx 2 3 50205 10


enum 2 3 50203

	kill targ

next



enum 2 7 50203

	kill targ

next



enum 2 8 50203

	kill targ

next



enum 2 10 50203

	kill targ

next


inst

enum 2 6 50200

	kill targ

next

*Removes all scripts for the specified agent 2 6 50200 if it exists.

*No need to micromanage. :)

loop

	doif sorq 2 6 50200 va00 eq 1

		scrx 2 6 50200 va00

	endi

	addv va00 1

untl va00 eq 2000

setv va00 0





inst

enum 2 3 50226

	kill targ

next

*Removes all scripts for the specified agent 2 6 50200 if it exists.

*No need to micromanage. :)

loop

	doif sorq 2 3 50226 va00 eq 1

		scrx 2 3 50226 va00

	endi

	addv va00 1

untl va00 eq 2000

setv va00 0





***OV## Definitions***		***STIMULUS NUMBERS***		***ATTR***			***BHVR***

*ov00	OWNR				76	Discomfort			1	Carryable		1	Activate 1

*ov01	Age Counter			77	Eaten plant			2	Mousable		2	Activate 2

*ov02	Energy Level		78	Eaten fruit			4	Activateable	4	Deactivate

*ov03	Gender			79	Eaten food			8	Greedy Cabin	8	Hit

*ov04	Horizonal Direction	80	Eaten animal		16	Invisible		16	Eat

*ov05	Veritcal Direction	81	Eaten detritus		32	Floatable		32	Pick Up

*ov06	Horizontal Velocity	82	Consume alchohol		64	Suffer Collisions			

*ov07	Vertical Velocity		83	Danger plant		128	Suffer Physics			

*ov08	Target			84	Friendly plant		256	Camera Shy			

*ov09	Home				85	Play bug			512	Open Air Cabin			

*ov10	Mate				86	Play critter		1024	Rotatable			

*ov11	Lifestage			87	Hit critter			2048	Presence			

*ov12	Sexuality			88	Play danger animal					

*ov13	Collection			89	Activate button					

*ov14	Boolean			90	Activate machine					

*ov15	Stage_1 Child		91	Got machine					

*ov16	Stage_2 Adol		92	Hit machine					

*ov17	Stage_3 Adult/Breed	93	Got creature egg					

*ov18	Stage_4 Elder		94	Travelled in lift					

*ov19	Stage_5 Senile		95	Travelled through meta door					

*ov20	Stage_6 Die/Dead		96	Travelled through internal door					

*					97	Played with toy		



***CA's***				***RTYP's***

*Ca smell 0 (sound)		0 - Atmosphere

*CA smell 1 (light)		1 - Wooden Walkway

*CA smell 2 (heat)		2 - Concrete Walkway

*Ca smell 3 (water)		3 - Indoor Corridor

*CA smell 4 (nutrient)		4 - Outdoor Concrete

*CA smell 5 (water)		5 - Normal Soil

*CA smell 6 (protein)		6 - Boggy Soil

*CA smell 7 (carbohydrate)	7 - Drained Soil

*CA smell 8 (fat)			8 - Fresh Water

*CA smell 9 (flowers)		9 - Salt Water

*CA smell 10 (machinery)	10- Ettin Home

*CA smell 11

*CA smell 12 (Norn)

*CA smell 13 (Grendel)

*CA smell 14 (Ettin)

*CA smell 15 (Norn home)

*CA smell 16 (Grendel home)

*CA smell 17 (Ettin home)

*CA smell 18

*CA smell 19