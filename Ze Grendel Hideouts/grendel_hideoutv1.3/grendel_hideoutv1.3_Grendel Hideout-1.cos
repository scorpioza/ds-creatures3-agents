* Script 1 extracted from grendel_hideoutv1.3.agents by Mirality REVELATION

*expands map
*map dimensions
doif maph < 15000
	mapd mapw 15000
endi
doif mapw < 15000
	mapd 15000 maph
endi

setv game "mapeditortmp" addm 9718 10000 1024 768 "swamp"
mmsc 10230 10384 ""
setv va00 addr game "mapeditortmp" 10566 10590 10511 10516 10731 10710
rtyp va00 0
rmsc 10578 10610 ""
setv game "mapeditortmp_600" va00
setv va00 addr game "mapeditortmp" 10493 10566 10502 10511 10731 10731
rtyp va00 6
rmsc 10529 10616 ""
setv game "mapeditortmp_601" va00
setv va00 addr game "mapeditortmp" 10380 10493 10495 10502 10733 10731
rtyp va00 6
rmsc 10436 10613 ""
setv game "mapeditortmp_602" va00
setv va00 addr game "mapeditortmp" 10325 10380 10497 10495 10734 10733
rtyp va00 0
rmsc 10352 10615 ""
setv game "mapeditortmp_603" va00
setv va00 addr game "mapeditortmp" 10280 10325 10532 10497 10733 10734
rtyp va00 6
rmsc 10302 10633 ""
setv game "mapeditortmp_604" va00
setv va00 addr game "mapeditortmp" 10252 10280 10533 10532 10726 10733
rtyp va00 6
rmsc 10266 10633 ""
setv game "mapeditortmp_605" va00
setv va00 addr game "mapeditortmp" 10210 10252 10531 10533 10732 10726
rtyp va00 6
rmsc 10231 10628 ""
setv game "mapeditortmp_606" va00
setv va00 addr game "mapeditortmp" 9862 10026 10446 10446 10732 10730
rtyp va00 6
rmsc 9944 10588 ""
setv game "mapeditortmp_607" va00
setv va00 addr game "mapeditortmp" 9832 9862 10445 10446 10692 10732
rtyp va00 0
rmsc 9847 10588 ""
setv game "mapeditortmp_608" va00
setv va00 addr game "mapeditortmp" 9787 9832 10444 10445 10455 10538
rtyp va00 0
rmsc 9809 10491 ""
setv game "mapeditortmp_609" va00
setv va00 addr game "mapeditortmp" 10210 10339 10446 10446 10551 10456
rtyp va00 0
rmsc 10274 10451 ""
setv game "mapeditortmp_610" va00
setv va00 addr game "mapeditortmp" 10630 10695 10055 10113 10434 10431
rtyp va00 6
rmsc 10662 10243 ""
setv game "mapeditortmp_611" va00
setv va00 addr game "mapeditortmp" 9866 10223 10256 10253 10437 10436
rtyp va00 0
rmsc 10044 10346 ""
setv game "mapeditortmp_612" va00
setv va00 addr game "mapeditortmp" 9786 9866 10280 10238 10435 10437
rtyp va00 0
rmsc 9826 10358 ""
setv game "mapeditortmp_613" va00
setv va00 addr game "mapeditortmp" 9845 9866 10000 10000 10249 10238
rtyp va00 0
rmsc 9855 10119 ""
setv game "mapeditortmp_614" va00
setv va00 addr game "mapeditortmp" 9764 9845 10078 10000 10219 10230
rtyp va00 0
rmsc 9804 10154 ""
setv game "mapeditortmp_615" va00
setv va00 addr game "mapeditortmp" 9822 9845 10227 10230 10261 10249
rtyp va00 0
rmsc 9833 10238 ""
setv game "mapeditortmp_616" va00
setv va00 addr game "mapeditortmp" 9754 9764 10094 10078 10210 10219
rtyp va00 0
rmsc 9759 10156 ""
setv game "mapeditortmp_617" va00
setv va00 addr game "mapeditortmp" 9768 9786 10322 10287 10349 10367
rtyp va00 0
rmsc 9777 10344 ""
setv game "mapeditortmp_618" va00
setv va00 addr game "mapeditortmp" 10358 10541 10000 10001 10436 10434
rtyp va00 6
rmsc 10449 10217 ""
setv game "mapeditortmp_619" va00
setv va00 addr game "mapeditortmp" 10590 10624 10516 10515 10681 10688
rtyp va00 0
rmsc 10607 10602 ""
setv game "mapeditortmp_620" va00
setv va00 addr game "mapeditortmp" 10541 10630 10001 10055 10434 10434
rtyp va00 6
rmsc 10585 10217 ""
setv game "mapeditortmp_621" va00
setv va00 addr game "mapeditortmp" 9736 9754 10135 10094 10167 10210
rtyp va00 0
rmsc 9745 10172 ""
setv game "mapeditortmp_622" va00
setv va00 addr game "mapeditortmp" 9866 10223 10000 10000 10256 10253
rtyp va00 0
rmsc 10044 10126 ""
setv game "mapeditortmp_623" va00
setv va00 addr game "mapeditortmp" 10223 10358 10000 10000 10436 10436
rtyp va00 0
rmsc 10290 10218 ""
setv game "mapeditortmp_624" va00
setv va00 addr game "mapeditortmp" 10026 10210 10446 10446 10730 10732
rtyp va00 6
rmsc 10118 10589 ""
setv game "mapeditortmp_625" va00
setv va00 addr game "mapeditortmp" 10624 10659 10515 10568 10688 10635
rtyp va00 0
rmsc 10641 10575 ""
setv game "mapeditortmp_626" va00
setv va00 addr game "mapeditortmp" 10045 10339 10436 10436 10446 10446
rtyp va00 1
rmsc 10192 10441 ""
setv game "mapeditortmp_627" va00
setv va00 addr game "mapeditortmp" 9846 10045 10437 10436 10445 10446
rtyp va00 1
rmsc 9945 10441 ""
setv game "mapeditortmp_628" va00
setv va00 addr game "mapeditortmp" 9799 9846 10435 10437 10444 10445
rtyp va00 1
rmsc 9822 10440 ""
setv game "mapeditortmp_629" va00

door game "mapeditortmp_600" game "mapeditortmp_601" 100
door game "mapeditortmp_600" game "mapeditortmp_620" 100
door game "mapeditortmp_601" game "mapeditortmp_602" 100
door game "mapeditortmp_602" game "mapeditortmp_603" 100
door game "mapeditortmp_603" game "mapeditortmp_604" 100
door game "mapeditortmp_604" game "mapeditortmp_605" 100
door game "mapeditortmp_605" game "mapeditortmp_606" 100
door game "mapeditortmp_606" game "mapeditortmp_625" 100
door game "mapeditortmp_607" game "mapeditortmp_608" 100
door game "mapeditortmp_607" game "mapeditortmp_625" 100

door game "mapeditortmp_607" game "mapeditortmp_628" 50
door game "mapeditortmp_608" game "mapeditortmp_609" 100
door game "mapeditortmp_608" game "mapeditortmp_628" 50
door game "mapeditortmp_608" game "mapeditortmp_629" 50
door game "mapeditortmp_609" game "mapeditortmp_629" 50
door game "mapeditortmp_610" game "mapeditortmp_625" 100
door game "mapeditortmp_610" game "mapeditortmp_627" 50
door game "mapeditortmp_611" game "mapeditortmp_621" 100
door game "mapeditortmp_612" game "mapeditortmp_613" 100
door game "mapeditortmp_612" game "mapeditortmp_623" 100

door game "mapeditortmp_612" game "mapeditortmp_624" 100
door game "mapeditortmp_612" game "mapeditortmp_627" 50
door game "mapeditortmp_612" game "mapeditortmp_628" 50
door game "mapeditortmp_613" game "mapeditortmp_614" 100
door game "mapeditortmp_613" game "mapeditortmp_616" 100
door game "mapeditortmp_613" game "mapeditortmp_618" 100
door game "mapeditortmp_613" game "mapeditortmp_623" 100
door game "mapeditortmp_613" game "mapeditortmp_628" 50
door game "mapeditortmp_613" game "mapeditortmp_629" 50
door game "mapeditortmp_614" game "mapeditortmp_615" 100

door game "mapeditortmp_614" game "mapeditortmp_616" 100
door game "mapeditortmp_614" game "mapeditortmp_623" 100
door game "mapeditortmp_615" game "mapeditortmp_616" 100
door game "mapeditortmp_615" game "mapeditortmp_617" 100
door game "mapeditortmp_617" game "mapeditortmp_622" 100
door game "mapeditortmp_619" game "mapeditortmp_621" 100
door game "mapeditortmp_619" game "mapeditortmp_624" 100
door game "mapeditortmp_620" game "mapeditortmp_626" 100
door game "mapeditortmp_623" game "mapeditortmp_624" 100
door game "mapeditortmp_624" game "mapeditortmp_627" 50

door game "mapeditortmp_625" game "mapeditortmp_627" 50
door game "mapeditortmp_625" game "mapeditortmp_628" 50
door game "mapeditortmp_627" game "mapeditortmp_628" 50
door game "mapeditortmp_628" game "mapeditortmp_629" 50

delg "mapeditortmp_600"
delg "mapeditortmp_601"
delg "mapeditortmp_602"
delg "mapeditortmp_603"
delg "mapeditortmp_604"
delg "mapeditortmp_605"
delg "mapeditortmp_606"
delg "mapeditortmp_607"
delg "mapeditortmp_608"
delg "mapeditortmp_609"
delg "mapeditortmp_610"
delg "mapeditortmp_611"
delg "mapeditortmp_612"
delg "mapeditortmp_613"
delg "mapeditortmp_614"
delg "mapeditortmp_615"
delg "mapeditortmp_616"
delg "mapeditortmp_617"
delg "mapeditortmp_618"
delg "mapeditortmp_619"
delg "mapeditortmp_620"
delg "mapeditortmp_621"
delg "mapeditortmp_622"
delg "mapeditortmp_623"
delg "mapeditortmp_624"
delg "mapeditortmp_625"
delg "mapeditortmp_626"
delg "mapeditortmp_627"
delg "mapeditortmp_628"
delg "mapeditortmp_629"

inst

cmra 10500 10380 1

*******************************************************
*
*
* INSTALL SCRIPTS
*
*


*Favourite Place
new: simp 1 3 20170 "b1-link" 3 0 1
attr 272
mvto 10230 10270
tick 1

*Cellular Automata
*Light emitters
new: simp 1 1 20176 "blnk" 0 0 0
mvto 9796 10120
emit 1 .4

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10455 10190
emit 1 .4

new: simp 1 1 20176 "blnk" 0 0 0
mvto 9923 10580
emit 1 .4

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10315 10530
emit 1 .4

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10515 10530
emit 1 .4


*Heat emitters
new: simp 1 1 20176 "blnk" 0 0 0
mvto 9796 10120
emit 2 1.2

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10455 10190
emit 2 1.2

new: simp 1 1 20176 "blnk" 0 0 0
mvto 9923 10580
emit 2 1.2

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10315 10530
emit 2 1.2

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10515 10530
emit 2 1.2


*Grendel smell
new: simp 1 1 20176 "blnk" 0 0 0
mvto 9796 10120
emit 13 1

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10455 10190
emit 13 1

new: simp 1 1 20176 "blnk" 0 0 0
mvto 9923 10580
emit 13 1

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10315 10530
emit 13 1

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10515 10530
emit 13 1

*Moisture
new: simp 1 1 20176 "blnk" 0 0 0
mvto 9796 10120
emit 3 .4

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10455 10190
emit 3 .4

new: simp 1 1 20176 "blnk" 0 0 0
mvto 9923 10580
emit 3 .4

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10315 10530
emit 3 .4

new: simp 1 1 20176 "blnk" 0 0 0
mvto 10515 10530
emit 3 .4


**create cave dripping creator**
new: simp 3 8 20171 "blnk" 1 0 20
accg 0
perm 0
attr 16
bhvr 0
mvto 9900 10090
tick 20


*Berry plant
new: simp 1 1 20171 "blnk" 0 0 0
mvto 9932 10147
tick 1


*Flies
reps rand 2 5
	doif rand 1 2 eq 2
		new: simp 2 14 20169 "flywithfemale" 28 0 300
		attr 66

		bhvr 0
		tick 5

		setv ov61 40

		mvsf 9789 10295
		setv ov10 rand 0 1
		doif ov10 eq 0
			setv ov10 -1
		endi
		setv ov11 rand 0 1
		doif ov11 eq 0
			setv ov11 -1
		endi
	else
		new: simp 2 14 20169 "flywithfemale" 28 15 300
		attr 66

		bhvr 0
		tick 5

		setv ov61 40

		mvsf 9789 10295
		setv ov10 rand 0 1
		doif ov10 eq 0
			setv ov10 -1
		endi
		setv ov11 rand 0 1
		doif ov11 eq 0
			setv ov11 -1
		endi
	endi
repe


*Mushroom
reps rand 2 5

	new: simp 2 3 20165 "b1-cap" 18 7 rand 200 6000
	bhvr 16
	attr 193
	perm 40
	emit 7 1
	ACCG 3
	ELAS 25
	fric 90
	AERO 2
	rnge 500

	setv ov10 rand 100 1000
	mvsf rand 9870 10550 10640
	TICK 60

repe


*Marbles!
new: simp 2 21 20172 "b1-marble03" 0 0 5000
attr 199

*hand can click on it - activate
clac 0

*Behavior
bhvr 43
accg 5
aero 1
elas 20
fric 60
perm 60
pose 0
puhl -1 10 7
mvsf 10020 10685

new: simp 2 21 20172 "b1-marble02" 0 0 5000
attr 199

*hand can click on it - activate
clac 0

*Behavior
bhvr 43
accg 5
aero 1
elas 20
fric 60
perm 60
pose 0
puhl -1 10 7
mvsf 10450 10380

new: simp 2 21 20172 "b1-marble01" 0 0 5000
attr 199

*hand can click on it - activate
clac 0

*Behavior
bhvr 43
accg 5
aero 1
elas 20
fric 60
perm 60
pose 0
puhl -1 10 7
mvsf 10500 10380


*Ecology Thinger

new: simp 3 3 20102 "b1-launch" 6 0 200
attr 20
bhvr 0
mvto 9833 10565
base 0

new: comp 3 3 20103 "b1-panel" 15 0 200
attr 20
bhvr 0
mvto 9830 10635
base 0
setv ov00 1


*Nest
new: simp 2 17 20170 "b1-nest" 2 0 0

mvto 9746 10270
tick 1
setv ov00 1
rnge 1500


*Snar plant
reps rand 1 3

	new: simp 2 4 20162 "b1-weed" 31 0 rand 200 6000
	BHVR 0
	perm 40
	emit 7 1
	ACCG 3
	ELAS 25
	fric 90
	AERO 2
	attr 193
	rnge 500
	core 0 61 0 0

	setv ov10 rand 200 1000
	mvsf rand 9880 10550 rand 10360 10666
	TICK 60

repe


*Teleporter
new: simp 2 21 20173 "b1-teleport" 11 0 1501
attr 198
bhvr 1
accg 3
fric 80
elas 5
perm 100
puhl -1 27 17
mvsf 9840 10355
seta va00 targ

new: simp 2 21 20173 "b1-teleport" 11 0 1500
attr 198
bhvr 1
accg 3
fric 80
elas 5
perm 100
puhl -1 27 17
mvsf 9900 10640
seta ov00 va00
seta avar va00 0 targ


*Gerana
*ov00 life stage
*ov01 life force
*ov02 life length

*ov10 direction
*ov11 direction of wall (if applic.)
*ov40 (random) how many 'walks' a critter does

reps rand 1 2
	new: simp 2 15 21020 "b1-snett" 42 18 2000
	attr 194
	elas .1
	accg 1
	perm 100
	base 0
*Set basic variables
	setv ov40 0
	setv ov10 0
	setv ov11 0

	frat 2
	mvsf rand 9900 10500 10340
	tick 1

repe

reps rand 1 2
	new: simp 2 15 21021 "b1-snett" 42 2 2000
	attr 194
	elas .1
	accg 1
	perm 100
	base 0
*Set basic variables
	setv ov40 0
	setv ov10 0
	setv ov11 0

	frat 2
	mvsf rand 9900 10500 10340
	tick 1

repe


*Portals
new: simp 3 2 20172 "b1-portal" 8 0 1501
attr 198
bhvr 1
accg 3
fric 80
elas 5
perm 100
puhl -1 22 12
mvsf 10600 10355
seta va00 targ

new: simp 3 2 20172 "b1-portal" 8 0 1500
attr 198
bhvr 1
accg 3
fric 80
elas 5
perm 100
puhl -1 22 12
mvsf 4505 9120
seta ov00 va00
seta avar va00 0 targ


*overlays
new: simp 1 1 20170 "b1-thorn" 2 0 8000
mvto 10069 10412

new: simp 1 1 20170 "b1-thorn" 2 1 8000
mvto 10582 10512


*Pesticle spray
new: simp 2 21 20101 "b1-spray" 5 0 5000
attr 199
perm 60
bhvr 33
elas 20
accg 1.20
fric 70
rnge 30
base 0
puhl -1 7 14

mvsf 10500 10350

endm

***********************************************************
*
*
* SCRIPTS
*
*

*Drops
**cave dripping script**
scrp 3 8 20171 9
	loop
		inst
		targ ownr
		setv va00 posx
		setv va01 posy
		new: simp 2 19 20173 "b1-drop" 5 0 rand 50 5000
		rnge 1000
		attr 208
		bhvr 0
		accg 5
		fric 100
		aero 0
		elas 0
		perm rand 100 0
		doif rand 1 0 eq 1
			emit 3 1
		else
			emit 4 0.5
		endi
		mvsf rand 9830 10630 va01
		slow
		targ ownr
		wait rand 10 200
	ever
endm

scrp 2 19 20173 9
*raindrops evaporate if not splashed correctly
	inst
	doif rtyp room ownr eq 8 or rtyp room ownr eq 9 or vely eq 0
		kill ownr
	endi
endm

scrp 2 19 20173 6
*raindrop splashes
	anim [1 2 3 4]
	over
	kill ownr
endm


*Berry plant
scrp 1 1 20171 9
	loop
		new: simp 2 8 20171 "b1-berry" 5 0 rand 50 1000
		attr 5
		perm rand 0 100
		emit 6 1
		elas 25
		fric 90
		setv ov01 0
		emit 7 .3
		mvsf rand 9932 10304 rand 10147 10007
		tick 1
		wait rand 50 300
	ever
endm


scrp 2 8 20171 9
	doif ov00 = 0
		reps 3
			wait rand 200 1000
			addv ov01 1
			pose ov01
		repe
	endi
	setv ov00 1
	wait rand 20 200
	pose 4
	attr 199
	accg 3
	aero 2
	bhvr 48
	wait rand 100 1000
	kill ownr
endm


scrp 2 8 20171 12
	sndc "chwp"
	stim writ from 78 .5
	chem 5 1
	chem 10 .2
	chem 12 .2
	chem 5 .2
	targ ownr
	kill targ
endm

*Eco Injector
scrp 3 3 20102 1
	anim [0 1 2]
	clac 1
	enum 3 3 20103
		mesg writ targ 1001
	next
endm

scrp 3 3 20102 2
	anim [2 1 0]
	clac 0
	enum 3 3 20103
		mesg writ targ 1002
	next
endm

scrp 3 3 20103 1001
	anim [0 1 2 3 4 5 6 7 8 9 10]
	over
	doif ov00 = 1
		setv ov00 0
		pat: butt 1 "b1-panel" 11 15 17 0 1 [0] 2002 0
		pat: butt 2 "b1-panel" 13 15 33 0 1 [0] 2003 0
	else
		part 1
		alph 255 0
		part 2
		alph 255 0
		targ ownr
	endi
endm

scrp 3 3 20103 1002
	anim [10 9 8 7 6 5 4 3 2 1 0]
	part 1
	alph 255 1
	part 2
	alph 255 1
	targ ownr
endm


scrp 3 3 20103 2002
	lock
	part 1
	anim [0 1 0]
	enum 3 3 20102
		mesg writ targ 3000
	next
	wait 50
	targ ownr
	unlk
endm

scrp 3 3 20103 2003
	lock
	part 2
	anim [0 1 0]
	enum 3 3 20102
		mesg writ targ 3001
	next
	wait 50
	targ ownr
	unlk
endm


scrp 3 3 20102 3000
	lock
	anim [3 4 5]

	new: simp 1 1 20164 "b1-launch" 10 8 199
	mvto 9838 10573
	base 0
	anim [0 0 0 0 1 1 1 1 0 0 0 0]
*		setv velx rand 1 3
	tick 1
	wait rand 1 5
	targ ownr
	wait 15

	anim [5 4 3 2]
	over
	wait 50
	unlk
endm

scrp 3 3 20102 3001
	lock
	anim [3 4 5]

	new: simp 1 1 20165 "b1-launch" 10 6 199
	mvto 9838 10573
	base 0
	anim [0 0 0 0 1 1 1 1 0 0 0 0]
*		setv velx rand 1 3
	tick 1
	wait rand 1 5
	targ ownr
	wait 15

	anim [5 4 3 2]
	over
	wait 50
	unlk
endm

scrp 1 1 20164 9
	over
	inst

*Snar plant
	enum 2 3 20162
		kill targ
	next
	enum 2 4 20162
		kill targ
	next


*Fly
	enum 2 14 20169
		kill targ
	next

*Nest & Sneit
	enum 2 17 20170
		kill targ
	next

	enum 2 14 20163
		kill targ
	next


*Gerana
	enum 2 15 21020
		kill targ
	next

	enum 2 15 21021
		kill targ
	next


*red cap
	enum 2 3 20165
		kill targ
	next
	enum 2 4 20165
		kill targ
	next


	kill ownr


endm

scrp 1 1 20165 9
	over
	inst

*Nest
	new: simp 2 17 20170 "b1-nest" 2 0 0

	mvto 9746 10270
	tick 1
	setv ov00 1
	rnge 1500


*Gerana
*ov00 life stage
*ov01 life force
*ov02 life length

*ov10 direction
*ov11 direction of wall (if applic.)
*ov40 (random) how many 'walks' a critter does

	reps rand 1 2
		new: simp 2 15 21020 "b1-snett" 42 18 2000
		attr 194
		elas .1
		accg 1
		perm 100
		base 0
*Set basic variables
		setv ov40 0
		setv ov10 0
		setv ov11 0

		frat 2
		mvsf rand 9900 10500 10340
		tick 1

	repe

	reps rand 1 2
		new: simp 2 15 21021 "b1-snett" 42 2 2000
		attr 194
		elas .1
		accg 1
		perm 100
		base 0
*Set basic variables
		setv ov40 0
		setv ov10 0
		setv ov11 0

		frat 2
		mvsf rand 9900 10500 10340
		tick 1

	repe


*Fly
	reps rand 2 5
		doif rand 1 2 eq 2
			new: simp 2 14 20169 "flywithfemale" 28 0 300
			attr 66

			bhvr 0
			tick 5

			setv ov61 40

			mvsf 9789 10295
			setv ov10 rand 0 1
			doif ov10 eq 0
				setv ov10 -1
			endi
			setv ov11 rand 0 1
			doif ov11 eq 0
				setv ov11 -1
			endi
		else
			new: simp 2 14 20169 "flywithfemale" 28 15 300
			attr 66

			bhvr 0
			tick 5

			setv ov61 40

			mvsf 9789 10295
			setv ov10 rand 0 1
			doif ov10 eq 0
				setv ov10 -1
			endi
			setv ov11 rand 0 1
			doif ov11 eq 0
				setv ov11 -1
			endi
		endi
	repe

*Snar
	reps rand 1 3

		new: simp 2 4 20162 "b1-weed" 31 0 rand 200 6000
		BHVR 0
		perm 40
		emit 7 1
		ACCG 3
		ELAS 25
		fric 90
		AERO 2
		attr 193
		rnge 500
		core 0 61 0 0

		setv ov10 rand 200 1000
		mvsf rand 9880 10550 rand 10360 10666
		TICK 60

	repe


*Red Cap
	reps rand 2 5

		new: simp 2 3 20165 "b1-cap" 18 7 rand 200 6000
		bhvr 16
		attr 193
		perm 40
		emit 7 1
		ACCG 3
		ELAS 25
		fric 90
		AERO 2
		rnge 500

		setv ov10 rand 100 1000
		mvsf rand 9870 10550 10640
		TICK 60

	repe

	kill ownr

endm



*Nest
scrp 2 17 20170 9
	esee 2 14 20163
		doif totl 2 14 20163 > 15
			kill targ
		endi
	next

	doif ov00 = 1
		setv ov00 0
		doif totl 2 14 20163 < 1
			inst
			reps rand 2 5
				new: simp 2 14 20163 "b1-bite" 24 0 300
				attr 66

				bhvr 49
				tick 5

				setv ov61 40

				mvsf 9789 10295
				setv ov10 rand 0 1
				doif ov10 eq 0
					setv ov10 -1
				endi
				setv ov11 rand 0 1
				doif ov11 eq 0
					setv ov11 -1
				endi
			repe
		endi
	endi
endm

scrp 2 14 20163 1001
	attr 194
	accg 4
	velo 0 0
	tick 0
	elas 0
	perm 100
	anim [0]
	loop
		setv vely 10
	untl fall = 0
	wait rand 50 100
	kill ownr

endm

scrp 2 14 20163 9


	addv ov01 1

	doif rtyp room targ eq 8 or rtyp room targ eq 9
		setv vely -5
		stop
	endi

	setv va00 0
	setv va01 0


	doif prop room targ 5 gt 0.2
		setv vely -10
		stop
	endi


	doif ov01 ge 100
		inst
		setv va00 posl
		setv va01 post
		rnge 1000

		doif totl 2 14 20163 < 5
			new: simp 2 14 20163 "b1-bite" 24 0 300
			attr 66
			doif tmvt va00 va01 <> 1
				kill targ
				stop
			endi

			bhvr 49
			tick 5

			setv ov61 40

			mvsf va00 va01
			setv ov10 rand 0 1
			doif ov10 eq 0
				setv ov10 -1
			endi
			setv ov11 rand 0 1
			doif ov11 eq 0
				setv ov11 -1
			endi
		endi
	endi
	targ ownr





	doif ov00 eq 0

		setv ov14 5
		setv ov15 5

		subv ov90 1

		gsub wall

		doif ov90 le 0

			doif va00 ne 1
				doif rand 0 2 eq 0

					negv ov10
				endi
				addv ov90 rand 1 3
			endi

			doif va01 ne 1


				negv ov11

				addv ov90 rand 2 5
			endi
		endi

		gsub velo
		gsub anim


		doif ov91 le 0
			gsub hunt

		else
			subv ov91 1
		endi

	endi


	doif ov00 eq 1
		gsub hunt
		doif posx lt ov70 and ov10 lt 0
			setv ov10 1
		endi
		doif posx gt ov70 and ov10 gt 0
			setv ov10 -1
		endi
		doif posy lt ov71 and ov11 lt 0
			setv ov11 1
		endi
		doif posy gt ov71 and ov11 gt 0
			setv ov11 -1
		endi
		setv ov14 4
		setv ov15 4

		gsub velo
		gsub wall
		gsub anim
	endi







	subr hunt
		rnge 200
		setv va99 0
		esee 2 1 1
			setv va99 1
			setv va00 posx
			setv va01 posy
			targ ownr
			setv ov00 1
			setv ov70 va00
			setv ov71 va01
		next
		doif va99 eq 0
			setv ov00 0
		endi
	retn



	subr velo
		doif ov10 lt 0

			negv ov14
			doif ov12 gt ov14
				subv ov12 2
			endi
			negv ov14
		else

			doif ov12 lt ov14
				addv ov12 2
			endi
		endi

		doif ov11 lt 0

			negv ov15
			doif ov13 gt ov15
				subv ov13 2
			endi
			negv ov15
		else

			doif ov13 lt ov15
				addv ov13 2
			endi
		endi

		setv velx ov12
		setv vely ov13
	retn


	subr wall

		doif obst 0 lt 100 and ov10 lt 0
			negv ov10
			setv va00 1
		endi

		doif obst 1 lt 100 and ov10 gt 0
			negv ov10
			setv va00 1
		endi

		doif obst 2 lt 50 and ov11 lt 0
			negv ov11
			setv va01 1
		endi

		doif obst 3 lt 100 and ov11 gt 0
			negv ov11
			setv va01 1
		endi
	retn


	subr anim

		doif ov12 gt 0
			anim [2 3 255]
		elif ov12 lt 0
			anim [8 9 255]
		endi
	retn

endm

scrp 2 14 20163 1
	setv vely -20
	targ from
	doif fmly eq 4
		stim writ targ 88 1
	endi
endm

scrp 2 14 20163 4
	targ from
	doif fmly eq 4
		stim writ targ 88 1
	endi
	mesg writ targ 5
endm

scrp 2 14 20163 12
	targ from
	doif fmly eq 4
		stim writ targ 88 1
	endi
	kill ownr
endm


scrp 2 18 20 9
	inst
	setv va00 posl
	setv va01 post
	rnge 700
	setv va66 0
	esee 2 14 5
		addv va66 1
	next
	doif va66 < 6

		new: simp 2 14 20163 "b1-bite" 24 0 300
		attr 66
		doif tmvt va00 va01 <> 1
			kill targ
			stop
		endi

		bhvr 49
		tick 5

		setv ov61 40

		mvsf va00 va01
		setv ov10 rand 0 1
		doif ov10 eq 0
			setv ov10 -1
		endi
		setv ov11 rand 0 1
		doif ov11 eq 0
			setv ov11 -1
		endi
	endi
endm


*Red Cap Mushroom
scrp 2 4 20165 9
	doif totl 2 4 20165 > 6
		kill ownr
	endi
	TICK 0
	targ ownr
	gsub grow
	targ ownr
	gsub live
	targ ownr
	gsub seed
	targ ownr
	gsub die

	subr grow
		wait rand 100 200
		setv va00 pose
		reps 5
			wait rand 50 300
			addv va00 1
			pose va00
		repe
	retn

	subr live
		loop
			doif ov10 ne 100
				setv va01 ov10
				subv va01 1
				setv ov10 va01
			endi
			wait 1
		untl ov10 = 100
	retn

	subr seed
		esee 2 3 20165
			addv va66 1
		next
		doif va66 < 4
			setv va10 posx
			setv va11 posy
			reps rand 1 3
				new: simp 2 3 20165 "b1-cap" 18 0 1000
				attr 195
				bhvr 16
				elas 0.5
				aero 2
				accg 0.05
				mvsf va10 va11
				velo rand -50 50 rand -5 0
				tick 1
			repe
			wait rand 100 500
		elif va66 > 6
			wait rand 100 500
		endi
	retn

	subr die
		kill ownr
	retn
endm

scrp 2 3 20165 9
	doif totl 2 3 50000 > 5
		doif totl 2 4 50000 > 5
			kill ownr
		endi
	endi

* speed to drift at
	setv va10 2.5
* amount to drift
	setv va11 50
	setv va00 rand 0 1
	setv va12 va11
	divv va12 2
	loop
		setv va01 posx
		doif va00 eq 0
			setv velx va10
			negv velx
			setv va00 1
		else
			setv velx va10
			setv va00 0
		endi
		loop
			setv va03 va01
			subv va03 posx
			absv va03
		untl fall eq 0 and wall eq down or va03 > va12
		setv va12 va11
	untl fall eq 0 and wall eq down
	wait rand 10 40
	inst
	setv va00 posx
	setv va01 posb
	subv va01 hght
	new: simp 2 4 20165 "b1-cap" 18 7 rand 200 6000
	bhvr 16
	perm 40
	emit 7 1
	accg 3
	elas 25
	fric 90
	aero 2
	setv ov10 rand 100 500
	setv va08 wdth
	mulv va08 0.5
	subv va00 va08
	mvsf va00 va01

	tick 1
	kill ownr
endm

scrp 2 4 20165 12
	sndc "chwp"
	stim writ from 77 .5
	chem 10 .5
	chem 12 .5
	targ ownr
	kill targ
endm

scrp 2 3 20165 12
	sndc "chwp"
	stim writ from 77 .5
	chem 10 .4
	chem 12 .4
	chem 5 .4
	targ ownr
	kill targ
endm


*Marbles
**activate 1
scrp 2 21 20172 1
	stim writ from 97 1
	sndc "dr10"

	velo rand -7.0 7.0 vely
	setv vely -12
	pose 1
	wait 7
	pose 0
	clac 0
endm

**hit event
scrp 2 21 20172 2
	stim writ from 97 1
	sndc "dr64"

	over
	wait 5
	pose 0
endm

**pickup event
scrp 2 21 20172 3
	pose 0
endm

**drop event
scrp 2 21 20172 4
	pose 0
endm


*Snar Plant
scrp 2 4 20162 9
	doif totl 2 4 20162 > 6
		kill ownr
	endi
	TICK 0
	targ ownr
	gsub grow
	targ ownr
	gsub live
	targ ownr
	gsub seed
	targ ownr
	gsub die

	subr grow
		wait rand 100 300
		setv va00 pose
		reps 16
			wait rand 100 300
			addv va00 1
			pose va00
		repe
	retn

	subr live
		loop
			doif ov10 ne 100
				setv va01 ov10
				subv va01 1
				setv ov10 va01
			endi
			wait 1
		untl ov10 = 100
	retn

	subr seed
		esee 2 3 20162
			addv va66 1
		next
		doif va66 < 4

			setv va10 posx
			setv va11 posy
			reps rand 1 2
				new: simp 2 3 20162 "b1-weed" 31 20 1000
				attr 195
				bhvr 0
				elas 0.5
				aero 2
				accg 0.2
				mvsf va10 va11
				velo rand -10 10 rand -10 0
				tick 1
			repe
			wait rand 40 90
			targ ownr
		elif va66 > 6
			wait rand 100 500
		endi
	retn

	subr die
		reps 3
			wait rand 40 80
			addv va00 1
			pose va00
		repe
		kill ownr
	retn
endm

scrp 2 3 20162 9
	wait rand 100 300
	esee 2 3 20162
		addv va66 1
	next
	doif va66 < 4


		setv va00 posx
		setv va01 posy
		new: simp 2 4 20162 "b1-weed" 31 0 rand 200 6000
		bhvr 0
		perm 40
		emit 7 1
		accg 3
		elas 25
		fric 90
		aero 2
		core 0 61 0 0
		setv ov10 rand 200 1000
		mvsf va00 va01
		tick 1
	else
		kill ownr
	endi
endm


*Fly
scrp 2 14 20169 1001
	attr 194
	accg 4
	velo 0 0
	tick 0
	elas 0
	perm 100
	anim [0]
	loop
		setv vely 10
	untl fall = 0
	wait rand 50 100
	kill ownr

endm

scrp 2 14 20169 9


	addv ov01 1

	doif rtyp room targ eq 8 or rtyp room targ eq 9
		setv vely -5
		stop
	endi

	setv va00 0
	setv va01 0


	doif prop room targ 5 gt 0.2
		setv vely -10
		stop
	endi


	doif ov01 ge 100
		inst
		setv va00 posl
		setv va01 post
		rnge 1000

		doif totl 2 14 20169 < 5
			new: simp 2 14 20169 "b1-bite" 24 0 300
			doif rand 1 2 eq 2
				new: simp 2 14 20169 "flywithfemale" 28 0 300
				attr 66

				bhvr 0
				tick 5

				setv ov61 40
			else
				new: simp 2 14 20169 "flywithfemale" 28 15 300
				attr 66

				bhvr 0
				tick 5

				setv ov61 40
			endi
		endi

		mvsf va00 va01
		setv ov10 rand 0 1
		doif ov10 eq 0
			setv ov10 -1
		endi
		setv ov11 rand 0 1
		doif ov11 eq 0
			setv ov11 -1
		endi
	endi
	targ ownr





	doif ov00 eq 0

		setv ov14 5
		setv ov15 5

		subv ov90 1

		gsub wall

		doif ov90 le 0

			doif va00 ne 1
				doif rand 0 2 eq 0

					negv ov10
				endi
				addv ov90 rand 1 3
			endi

			doif va01 ne 1


				negv ov11

				addv ov90 rand 2 5
			endi
		endi

		gsub velo
		gsub anim


		doif ov91 le 0
			gsub hunt

		else
			subv ov91 1
		endi

	endi


	doif ov00 eq 1
		gsub hunt
		doif posx lt ov70 and ov10 lt 0
			setv ov10 1
		endi
		doif posx gt ov70 and ov10 gt 0
			setv ov10 -1
		endi
		doif posy lt ov71 and ov11 lt 0
			setv ov11 1
		endi
		doif posy gt ov71 and ov11 gt 0
			setv ov11 -1
		endi
		setv ov14 4
		setv ov15 4

		gsub velo
		gsub wall
		gsub anim
	endi







	subr hunt
		rnge 200
		setv va99 0
		esee 2 1 1
			setv va99 1
			setv va00 posx
			setv va01 posy
			targ ownr
			setv ov00 1
			setv ov70 va00
			setv ov71 va01
		next
		doif va99 eq 0
			setv ov00 0
		endi
	retn



	subr velo
		doif ov10 lt 0

			negv ov14
			doif ov12 gt ov14
				subv ov12 2
			endi
			negv ov14
		else

			doif ov12 lt ov14
				addv ov12 2
			endi
		endi

		doif ov11 lt 0

			negv ov15
			doif ov13 gt ov15
				subv ov13 2
			endi
			negv ov15
		else

			doif ov13 lt ov15
				addv ov13 2
			endi
		endi

		setv velx ov12
		setv vely ov13
	retn


	subr wall

		doif obst 0 lt 100 and ov10 lt 0
			negv ov10
			setv va00 1
		endi

		doif obst 1 lt 100 and ov10 gt 0
			negv ov10
			setv va00 1
		endi

		doif obst 2 lt 50 and ov11 lt 0
			negv ov11
			setv va01 1
		endi

		doif obst 3 lt 100 and ov11 gt 0
			negv ov11
			setv va01 1
		endi
	retn


	subr anim

		doif ov12 gt 0
			anim [2 3 255]
		elif ov12 lt 0
			anim [0 1 255]
		endi
	retn

endm

scrp 2 14 20169 1
endm

scrp 2 14 20169 4
endm

scrp 2 14 20169 12
	stim writ from 80 .5
	chem 5 1
	chem 10 .5
	chem 12 1
endm


*Gerana

scrp 2 15 21021 9
	gsub babywalk

	subr babywalk
		setv ov40 rand 1 6
		setv ov10 rand 1 -1
		wait rand 1 10

		doif obst rght lt 5
			setv ov11 1
		elif obst left lt 5
			setv ov11 2
		else
			setv ov11 0
		endi

		doif carr eq null and fall = 0

*Checks for walls
			doif ov11 = 1
				gsub babyleft
			endi
			doif ov11 = 2
				gsub babyright
			endi
*Checks if it is going right
			doif ov10 = 1
				gsub babyright
			endi
*Checks if it is going left
			doif ov10 = -1
				gsub babyleft
			endi
		else
			stop
		endi
	retn

*The going right subroutine
	subr babyright
		reps ov40
			anim [6 7]
			velo 1.2 -1
			over
			anim [8 9]
			velo 1.2 -1
			over
			anim [10 11]
			velo 1.2 -1
			over
		repe
	retn

*The going left subroutine
	subr babyleft
		reps ov40
			anim [0 1]
			velo -1 -1
			over
			anim [2 3]
			velo -1 -1
			over
			anim [4 5]
			velo -1 -1
			over
		repe
	retn

endm


scrp 2 15 21020 9


*Set length of walk and direction of walk
	gsub adultwalk


	subr adultwalk
		setv ov40 rand 1 6
		setv ov10 rand 1 -1
		wait rand 1 10

		doif obst rght lt 5
			setv ov11 1
		elif obst left lt 5
			setv ov11 2
		else
			setv ov11 0
		endi

		doif carr eq null and fall = 0

*Checks for walls
			doif ov11 = 1
				gsub left
			endi
			doif ov11 = 2
				gsub right
			endi
*Checks if it is going right
			doif ov10 = 1
				gsub right
			endi
*Checks if it is going left
			doif ov10 = -1
				gsub left
			endi
		else
			stop
		endi
	retn

*The going right subroutine
	subr left
		reps ov40
			anim [0 1]
			velo -2 -1.5
			over
			anim [2 3]
			velo -2 -1.5
			over
			anim [4 5]
			velo -2 -1.5
			over
			anim [6 7]
			velo -2 -1.5
			over
		repe
	retn

*The going left subroutine
	subr right
		reps ov40
			anim [8 9]
			velo 2.2 -1.5
			over
			anim [10 11]
			velo 2.2 -1.5
			over
			anim [12 13]
			velo 2.2 -1.5
			over
			anim [14 15]
			velo 2.2 -1.5
			over
		repe
	retn

endm


*Teleporter
scrp 2 21 20173 1
	anim [1 2 3 4 5 6 7 8 9]
	targ ov00
	setv va00 posx
	setv va01 posb
	targ ownr
	over
	etch 4 0 0
		doif movs eq 0
			mvsf va00 va01

		endi
	next

	over
	pose 0
	targ ov00
	pose 0
	targ ownr
endm

*Portal
scrp 3 2 20172 1
	anim [1 2 3 4 5 6 7]
	targ ov00
	setv va00 posx
	setv va01 posb
	targ ownr
	over
	etch 4 0 0
		doif movs eq 0
			mvsf va00 va01

		endi
	next

	over
	pose 0
	targ ov00
	pose 0
	cmrt 1
	targ ownr
endm


*Pesticle Spray
scrp 2 21 20101 1
	doif from eq pntr

		rnge 200

		anim [0 1 2 3 4 3 2 1 0]
		esee 2 14 20169
			mesg writ targ 1001
		next
		esee 2 14 20163
			mesg writ targ 1001
		next
	else
		stim writ from 97 1
		sndc "dr10"

		velo rand -7.0 7.0 vely
		setv vely -12

	endi
endm